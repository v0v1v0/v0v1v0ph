<div class="container">

<table style="width: 100%;"><tr>
<td>flood3</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to compute flood extent or flood duration <code>SpatRaster</code>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithms <code>hyd1d::waterLevel()</code> and <code>hyd1d::waterLevelPegelonline()</code>
</h2>

<h3>Description</h3>

<p>Computes flood extent, if <code>length(seq)</code> equals 1, or flood
duration for the active floodplains along the German federal waterways Elbe
and Rhine based on 1d water levels computed by
<code>waterLevel</code> or
<code>waterLevelPegelonline</code> provided by package <span class="pkg">hyd1d</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">flood3(x, seq, filename = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>has to by type <code>SpatRaster</code> and has to include both input
raster layers <code>csa</code> (cross section areas) and <code>dem</code> (digital
elevation model). To compute water levels along the River Elbe <code>x</code>
has to be in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/25833/">ETRS 1989 UTM 33N</a>,
for River Rhine in
<a href="https://spatialreference.org/ref/epsg/25832/">ETRS 1989 UTM 32N</a>.
Other coordinate reference systems are not permitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seq</code></td>
<td>
<p>has to be type <code>c("POSIXct", "POSIXt")</code> or <code>Date</code> and
have a length larger than 0. If <code>seq</code> is type <code>c("POSIXct", "POSIXt")</code>,
values must be in the temporal range between 31 days ago (<code>Sys.time() 
  - 2678400</code>) and now (<code>Sys.time()</code>). Then
<code>waterLevelPegelonline</code> is used internally for the water
level computations. If <code>seq</code> is type <code>Date</code>, values must be in the
temporal range between 1960-01-01 and yesterday (<code>Sys.Date() - 1</code>)
and <code>waterLevel</code> is used internally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>supplies an optional output filename and has to be type
<code>character</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments as for <code>writeRaster</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For every time step provided in <code>seq</code>, <code>flood3()</code> computes
a 1d water level along the requested river section. This 1d water level is
transfered to a <code>wl</code> (water level) raster layer, which is in fact a
copy of the <code>csa</code> (cross section areas) layer, and then
compared to the <code>dem</code> (digital elevation model) layer. Where the
<code>wl</code> layer is higher than the <code>dem</code>, layer flood duration is
increased by 1.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object with flood duration in the range of
<code>[0, length(seq)]</code>.
</p>


<h3>References</h3>

<p>Weber A (2022).
“Flood durations and potential natural vegetation distribution on the floodplains of River Rhine and River Elbe, Germany.”
<a href="https://doi.org/10.1594/PANGAEA.948042">doi:10.1594/PANGAEA.948042</a>.
</p>
<p>Weber A (2023).
“Flood durations of the year 2022 on the floodplains of River Rhine and River Elbe, Germany.”
<a href="https://doi.org/10.1594/PANGAEA.961117">doi:10.1594/PANGAEA.961117</a>.
</p>


<h3>See Also</h3>

<p><code>waterLevel</code>,
<code>waterLevelPegelonline</code>,
<code>writeRaster</code>,
<code>terraOptions</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  options("hydflood.datadir" = tempdir())
  library(hydflood)
  
  # import the raster data and create a raster stack
  c &lt;- st_crs("EPSG:25833")
  e &lt;- ext(309000, 310000, 5749000, 5750000)
  x &lt;- hydSpatRaster(ext = e, crs = c)
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-12-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  fd &lt;- flood3(x = x, seq = seq)


</code></pre>


</div>
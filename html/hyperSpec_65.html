<div class="container">

<table style="width: 100%;"><tr>
<td>as.data.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Conversion of a hyperSpec object into a data.frame or matrix
<code>as.data.frame</code> returns <code>x@data</code> (as data.frame) <code>as.matrix</code>
returns the spectra matrix <code>x@data$spc</code> as matrix</h2>

<h3>Description</h3>

<p>The data.frame returned by <code>as.long.df</code> is guaranteed to have columns
<code>spc</code> and <code>.wavelength</code>. If <code>nwl (x) == 0</code> these columns
will be <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'hyperSpec'
as.data.frame(x, row.names = TRUE, optional = NULL, ...)

## S3 method for class 'hyperSpec'
as.matrix(x, ...)

as.wide.df(x, wl.prefix = "")

as.long.df(x, rownames = FALSE, wl.factor = FALSE, na.rm = TRUE)

as.t.df(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>hyperSpec</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names</code></td>
<td>
<p>if <code>TRUE</code>, a column <code>.row</code> is created containing row names or row
indices if no rownames are set. If character vector, the rownames are set accordingly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optional</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl.prefix</code></td>
<td>
<p>prefix to prepend wavelength column names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rownames</code></td>
<td>
<p>should the rownames be in column <code>.rownames</code> of the
long-format data.frame?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl.factor</code></td>
<td>
<p>should the wavelengths be returned as a factor (instead of
numeric)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>if <code>TRUE</code>, rows where spc is not <code>NA</code> are deleted.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>x@data</code> and <code>x@data$spc</code> (== <code>x$spc</code> == <code>x [[]]</code>), respectively.
</p>
<p><code>as.wide.df</code> returns a data.frame that consists of the extra data and
the spectra matrix converted to a data.frame. The spectra matrix is
expanded <em>in place</em>.
</p>
<p><code>as.long.df</code> returns the stacked or molten version of <code>x@data</code>. The
wavelengths are in column <code>.wavelength</code>.
</p>
<p><code>as.t.df</code> returns a data.frame similar to <code>as.long.df</code>, but each
spectrum in its own column. This is useful for exporting summary spectra,
see the example.
</p>


<h3>Author(s)</h3>

<p>C. Beleites
</p>


<h3>See Also</h3>

<p><code>as.data.frame</code>
</p>
<p>and <code>base::as.matrix()</code>
</p>
<p>[<code>[[</code>()] (<code style="white-space: pre;">⁠[[]]⁠</code>) for a shortcut to <code>as.matrix</code>
</p>
<p><code>stack</code> and <code>melt</code> or <code>reshape2::melt()</code> for
other functions producing long-format data.frames.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
as.data.frame (chondro [1:3,, 600 ~ 620])
as.matrix (chondro [1:3,, 600 ~ 620])
lm (c ~ spc, data = flu [,,450])

as.wide.df (chondro [1:5,, 600 ~ 610])
summary (as.wide.df (chondro [1:5,, 600 ~ 610]))

as.long.df (flu [,, 405 ~ 410])
summary (as.long.df (flu [,, 405 ~ 410]))
summary (as.long.df (flu [,, 405 ~ 410], rownames = TRUE))
summary (as.long.df (flu [,, 405 ~ 410], wl.factor = TRUE))

df &lt;- as.t.df (apply (chondro, 2, mean_pm_sd))
head (df)

if (require (ggplot2)){
  ggplot (df, aes (x = .wavelength)) +
    geom_ribbon (aes (ymin = mean.minus.sd, ymax = mean.plus.sd),
      fill = "#00000040") +
    geom_line (aes (y = mean))
}
</code></pre>


</div>
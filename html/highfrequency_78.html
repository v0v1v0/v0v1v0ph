<div class="container">

<table style="width: 100%;"><tr>
<td>rmOutliersTrades</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remove outliers in trades without using quote data</h2>

<h3>Description</h3>

<p>Delete entries for which the price is outlying with respect to surrounding entries. 
In comparison to tradesCleanupUsingQuotes, this function doesn't need quote data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rmOutliersTrades(pData, maxi = 10, window = 50, type = "advanced", tz = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pData</code></td>
<td>
<p>a <code>data.table</code> or <code>xts</code> object at least containing the column <code>"PRICE"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxi</code></td>
<td>
<p>an integer, indicating the maximum number of median absolute deviations allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>an integer, indicating the time window for which the "outlyingness" is considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>should be <code>"standard"</code> or <code>"advanced"</code> (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>fallback time zone used in case we we are unable to identify the timezone of the data, by default: <code>tz = NULL</code>. 
With the non-disk functionality, we attempt to extract the timezone from the <code>DT</code> column (or index) of the data, which may fail. 
In case of failure we use <code>tz</code> if specified, and if it is not specified, we use <code>"UTC"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>


<ul>
<li>
<p> If <code>type = "standard"</code>: Function deletes entries for which the price deviated by more than "maxi"
median absolute deviations from a rolling centered median (excluding
the observation under consideration) of window observations.
</p>
</li>
<li>
<p> If <code>type = "advanced"</code>:  Function deletes entries for which the price deviates by more than "maxi"
median absolute deviations from the value closest to the price of
these three options:
</p>

<ol>
<li>
<p> Rolling centered median (excluding the observation under consideration)
</p>
</li>
<li>
<p> Rolling median of the following window of observations
</p>
</li>
<li>
<p> Rolling median of the previous window of observations
</p>
</li>
</ol>
<p>The advantage of this procedure compared to the "standard" proposed
by Barndorff-Nielsen et al. (2010, footnote 8) is that it will not incorrectly remove
large price jumps. Therefore this procedure has been set as the default
for removing outliers. 
</p>
<p>Note that the median absolute deviation is taken over the entire
day. In case it is zero (which can happen if prices don't change much), 
the median absolute deviation is taken over a subsample without constant prices.
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>xts</code> object or <code>data.table</code> depending on type of input.
</p>


<h3>Author(s)</h3>

<p>Jonathan Cornelissen, Kris Boudt, and Onno Kleen.
</p>


<h3>References</h3>

<p>Barndorff-Nielsen, O. E., P. R. Hansen, A. Lunde, and N. Shephard (2009). Realized kernels in practice: Trades and quotes. <em>Econometrics Journal</em>, 12, C1-C32.
</p>


</div>
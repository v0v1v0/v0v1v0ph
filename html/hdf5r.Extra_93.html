<div class="container">

<table style="width: 100%;"><tr>
<td>h5WriteDataset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write array-like data into an existing H5 dataset</h2>

<h3>Description</h3>

<p>Low-level helper function to write atomic R data into an existing H5 dataset. 
All data written will be treated as array for HDF5.
</p>


<h3>Usage</h3>

<pre><code class="language-R">h5WriteDataset(x, robj, ...)

## S3 method for class 'H5D'
h5WriteDataset(
  x,
  robj,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'H5Group'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'H5File'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'character'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An <code>H5File</code>, <code>H5Group</code>, 
<code>H5D</code> or a path name of HDF5 file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robj</code></td>
<td>
<p>An R array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>H5D$write()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idx_list</code></td>
<td>
<p>The indices for each dimension of <code>name</code> to subset given 
as a list. If <code>NULL</code>, the entire dataset will be use. Passed to 
<code>H5D</code><code>$write(args)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transpose</code></td>
<td>
<p>Whether or not to transpose the input matrix. Only works for 
a 2-dimension array-like object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block_size</code></td>
<td>
<p>Default size for number of columns to transpose in a single 
writing. Increasing block_size may speed up but at an additional memory cost.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Print progress.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name of the HDF5 dataset to be written.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Note</h3>

<p>If you want to write <code>robj</code> into scalar space, you should use 
<code>h5WriteScalar</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

# Scalar (will be written into array space for HDF5) ##########
h5CreateDataset(
  tmp.file, 
  name = "test/bool", 
  dims = 1, 
  storage.mode = logical()
) # Must create the dataset first
h5WriteDataset(tmp.file, FALSE, name = "test/bool")
x &lt;- h5Read(tmp.file, name = "test/bool")
stopifnot(!x)

h5CreateDataset(tmp.file, name = "test/num", dims = 1)
h5WriteDataset(tmp.file, 100.0, name = "test/num")
x &lt;- h5Read(tmp.file, name = "test/num")
stopifnot(identical(x, 100.0))

h5CreateDataset(
  tmp.file, 
  name = "test/string", 
  dims = 1, 
  storage.mode = character()
)
h5WriteDataset(tmp.file, "ABC", name = "test/string")
x &lt;- h5Read(tmp.file, name = "test/string")
stopifnot(identical(x, "ABC"))

# Vector (1d array) ##########
x1 &lt;- rep(FALSE, 10)
h5CreateDataset(
  tmp.file, 
  name = "vec/bool", 
  dims = 10, 
  storage.mode = logical()
)
h5WriteDataset(tmp.file, x1, name = "vec/bool")
x &lt;- h5Read(tmp.file, name = "vec/bool")
stopifnot(identical(x, x1))

x1 &lt;- rep(1.1, 10)
h5CreateDataset(
  tmp.file, 
  name = "vec/num", 
  dims = 10
)
h5WriteDataset(tmp.file, x1, name = "vec/num")
x &lt;- h5Read(tmp.file, name = "vec/num")
stopifnot(identical(x, x1))

x1 &lt;- rep(2.0, 5)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "vec/num", 
  idx_list = list(c(1, 3, 5, 7, 9)) # Set each indices to be written
)
x &lt;- h5Read(tmp.file, name = "vec/num")
stopifnot(identical(x, rep(c(2.0, 1.1), 5)))

# matrix ##########
x1 &lt;- matrix(1.0, 7, 5)
h5CreateDataset(
  tmp.file, 
  name = "mat/num", 
  dims = dim(x1)
)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num"
)
x &lt;- h5Read(tmp.file, name = "mat/num")
stopifnot(identical(x, x1))

x1 &lt;- matrix(2.0, 3, 4)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num",
  idx_list = list(2:4, 1:4)
)
x &lt;- h5Read(tmp.file, name = "mat/num")
print(x)

h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num",
  idx_list = list(1:4, 2:4),  # idx_list must match the transposed matrix
  transpose = TRUE
)
x &lt;- h5Read(tmp.file, name = "mat/num")
print(x)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pca_your_recipe</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform PCA</h2>

<h3>Description</h3>

<p>This is a simple function that will perform PCA analysis on a passed recipe.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pca_your_recipe(.recipe_object, .data, .threshold = 0.75, .top_n = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.recipe_object</code></td>
<td>
<p>The recipe object you want to pass.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>The full data set that is used in the original recipe object passed
into <code>.recipe_object</code> in order to obtain the baked data of the transform.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.threshold</code></td>
<td>
<p>A number between 0 and 1. A fraction of the total variance
that should be covered by the components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.top_n</code></td>
<td>
<p>How many variables loadings should be returned per PC</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a simple wrapper around some recipes functions to perform a PCA on a
given recipe. This function will output a list and return it invisible.
All of the components of the analysis will be returned in a list as their own
object that can be selected individually. A scree plot is also included. The
items that get returned are:
</p>

<ol>
<li>
<p> pca_transform - This is the pca recipe.
</p>
</li>
<li>
<p> variable_loadings
</p>
</li>
<li>
<p> variable_variance
</p>
</li>
<li>
<p> pca_estimates
</p>
</li>
<li>
<p> pca_juiced_estimates
</p>
</li>
<li>
<p> pca_baked_data
</p>
</li>
<li>
<p> pca_variance_df
</p>
</li>
<li>
<p> pca_rotattion_df
</p>
</li>
<li>
<p> pca_variance_scree_plt
</p>
</li>
<li>
<p> pca_loadings_plt
</p>
</li>
<li>
<p> pca_loadings_plotly
</p>
</li>
<li>
<p> pca_top_n_loadings_plt
</p>
</li>
<li>
<p> pca_top_n_plotly
</p>
</li>
</ol>
<h3>Value</h3>

<p>A list object with several components.
</p>


<h3>Author(s)</h3>

<p>Steven P. Sanderson II, MPH
</p>


<h3>See Also</h3>

<p><a href="https://recipes.tidymodels.org/reference/step_pca.html">https://recipes.tidymodels.org/reference/step_pca.html</a>
</p>
<p>Other Data Wrangling: 
<code>get_juiced_data()</code>
</p>
<p>Other Data Recipes: 
<code>hai_data_impute()</code>,
<code>hai_data_poly()</code>,
<code>hai_data_scale()</code>,
<code>hai_data_transform()</code>,
<code>hai_data_trig()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">suppressPackageStartupMessages(library(timetk))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(purrr))
suppressPackageStartupMessages(library(healthyR.data))
suppressPackageStartupMessages(library(rsample))
suppressPackageStartupMessages(library(recipes))
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(plotly))

data_tbl &lt;- healthyR_data %&gt;%
  select(visit_end_date_time) %&gt;%
  summarise_by_time(
    .date_var = visit_end_date_time,
    .by       = "month",
    value     = n()
  ) %&gt;%
  set_names("date_col", "value") %&gt;%
  filter_by_time(
    .date_var = date_col,
    .start_date = "2013",
    .end_date = "2020"
  ) %&gt;%
  mutate(date_col = as.Date(date_col))

splits &lt;- initial_split(data = data_tbl, prop = 0.8)

rec_obj &lt;- recipe(value ~ ., training(splits)) %&gt;%
  step_timeseries_signature(date_col) %&gt;%
  step_rm(matches("(iso$)|(xts$)|(hour)|(min)|(sec)|(am.pm)"))

output_list &lt;- pca_your_recipe(rec_obj, .data = data_tbl)
output_list$pca_variance_scree_plt
output_list$pca_loadings_plt
output_list$pca_top_n_loadings_plt

</code></pre>


</div>
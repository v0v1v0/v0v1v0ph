<div class="container">

<table style="width: 100%;"><tr>
<td>ts_feature_cluster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time Series Feature Clustering</h2>

<h3>Description</h3>

<p>This function returns an output list of data and plots that
come from using the <code>K-Means</code> clustering algorithm on a time series data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ts_feature_cluster(
  .data,
  .date_col,
  .value_col,
  ...,
  .features = c("frequency", "entropy", "acf_features"),
  .scale = TRUE,
  .prefix = "ts_",
  .centers = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>The data passed must be a <code>data.frame/tibble</code> only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.date_col</code></td>
<td>
<p>The date column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.value_col</code></td>
<td>
<p>The column that holds the value of the time series where you
want the features and clustering performed on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>This is where you can place grouping variables that are passed off
to <code>dplyr::group_by()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.features</code></td>
<td>
<p>This is a quoted string vector using c() of features that you
would like to pass. You can pass any feature you make or those from the <code>tsfeatures</code>
package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.scale</code></td>
<td>
<p>If TRUE, time series are scaled to mean 0 and sd 1 before features are computed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.prefix</code></td>
<td>
<p>A prefix to prefix the feature columns. Default: "ts_"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.centers</code></td>
<td>
<p>An integer of how many different centers you would like to generate.
The default is 3.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function will return a list object output. The function itself
requires that a time series tibble/data.frame get passed to it, along with
the <code>.date_col</code>, the <code>.value_col</code> and a period of data. It uses the underlying
function <code>timetk::tk_tsfeatures()</code> and takes the output of that and performs
a clustering analysis using the <code>K-Means</code> algorithm.
</p>
<p>The function has a parameter of <code>.features</code> which can take any of the features
listed in the <code>tsfeatures</code> package by Rob Hyndman. You can also create custom
functions in the <code>.GlobalEnviron</code> and it will take them as quoted arguments.
</p>
<p>So you can make a function as follows
</p>
<p><code>my_mean &lt;- function(x){return(mean(x, na.rm = TRUE))}</code>
</p>
<p>You can then call this by using <code>.features = c("my_mean")</code>.
</p>
<p>The output of this function includes the following:
</p>
<p><strong>Data Section</strong>
</p>

<ul>
<li>
<p> ts_feature_tbl
</p>
</li>
<li>
<p> user_item_matrix_tbl
</p>
</li>
<li>
<p> mapped_tbl
</p>
</li>
<li>
<p> scree_data_tbl
</p>
</li>
<li>
<p> input_data_tbl (the original data)
</p>
</li>
</ul>
<p><strong>Plots</strong>
</p>

<ul>
<li>
<p> static_plot
</p>
</li>
<li>
<p> plotly_plot
</p>
</li>
</ul>
<h3>Value</h3>

<p>A list output
</p>


<h3>Author(s)</h3>

<p>Steven P. Sanderson II, MPH
</p>


<h3>See Also</h3>

<p><a href="https://pkg.robjhyndman.com/tsfeatures/index.html">https://pkg.robjhyndman.com/tsfeatures/index.html</a>
</p>
<p>Other Clustering: 
<code>ts_feature_cluster_plot()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)

data_tbl &lt;- ts_to_tbl(AirPassengers) %&gt;%
  mutate(group_id = rep(1:12, 12))

ts_feature_cluster(
  .data = data_tbl,
  .date_col = date_col,
  .value_col = value,
  group_id,
  .features = c("acf_features","entropy"),
  .scale = TRUE,
  .prefix = "ts_",
  .centers = 3
)

</code></pre>


</div>
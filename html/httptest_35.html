<div class="container">

<table style="width: 100%;"><tr>
<td>start_vignette</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set mocking/capturing state for a vignette</h2>

<h3>Description</h3>

<p>Use <code>start_vignette()</code> to either use previously recorded responses, if they
exist, or capture real responses for future use.
</p>


<h3>Usage</h3>

<pre><code class="language-R">start_vignette(path, ...)

end_vignette()
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Root file path for the mocks for this vignette. A good idea is
to use the file name of the vignette itself.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments passed to <code>start_capturing()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In a vignette or other R Markdown or Sweave document, place
<code>start_vignette()</code> in an R code block at the beginning,
before the first API request is made, and put
<code>end_vignette()</code> in a R code chunk at the end. You may
want to make those R code chunks have <code>echo=FALSE</code> in order to hide the fact
that you're calling them.
</p>
<p>The behavior changes based on the existence of the <code>path</code> directory. The
first time you build the vignette, the directory won't exist yet, so it will
make real requests and record them inside of <code>path</code>. On subsequent runs, the
mocks will be used. To record fresh responses from the server, delete the
<code>path</code> directory, and the responses will be recorded again the next time the
vignette runs.
</p>
<p>If you have additional setup code that you'd like available across all of
your package's vignettes, put it in <code>inst/httptest/start-vignette.R</code> in your
package, and it will be called in <code>start_vignette()</code> before the mock/record
context is set. Similarly, teardown code can go in
<code>inst/httptest/end-vignette.R</code>, evaluated in <code>end_vignette()</code> after mocking
is stopped.
</p>


<h3>Value</h3>

<p>Nothing; called for its side effect of starting/ending
response recording or mocking.
</p>


<h3>See Also</h3>

<p><code>start_capturing()</code> for how requests are recorded; <code>use_mock_api()</code>
for how previously recorded requests are loaded; <code>change_state()</code> for how to
handle recorded requests when the server state is changing;
<code>vignette("vignettes", package="httptest")</code> for an overview of all
</p>


</div>
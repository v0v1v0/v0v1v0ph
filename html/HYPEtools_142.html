<div class="container">

<table style="width: 100%;"><tr>
<td>UpstreamPointSources</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize point source emissions of all upstream areas</h2>

<h3>Description</h3>

<p>Function to calculate point source emissions over all upstream areas of a vector of SUBIDs or all SUBIDs in a GeoData table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">UpstreamPointSources(
  subid = NULL,
  gd,
  psd,
  bd = NULL,
  signif.digits = 4,
  progbar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>subid</code></td>
<td>
<p>Integer vector of SUBIDs to calculate upstream point sources for (must exist in <code>gd</code>).
If <code>NULL</code>, upstream point sources for all SUBIDs in 'gd' will be calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gd</code></td>
<td>
<p>A data frame containing columns 'SUBID' with SUBIDs and 'MAINDOWN' with downstream SUBIDs,
e.g. an imported 'GeoData.txt' file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>psd</code></td>
<td>
<p>A data frame with HYPE point source specifications, typically a 'PointSourceData.txt' file imported with <code>ReadPointSourceData</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bd</code></td>
<td>
<p>A data frame, containing 'BRANCHID' and 'SOURCEID' columns, e.g. an imported 'BranchData.txt' file. Optional argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signif.digits</code></td>
<td>
<p>Integer, number of significant digits to round upstream SLCs to. See also <code>signif</code>. Set to <code>NULL</code> to prevent rounding.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progbar</code></td>
<td>
<p>Logical, display a progress bar while calculating SLC class fractions. Adds overhead to calculation time but useful when <code>subid</code>
is <code>NULL</code> or contains many SUBIDs.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>UpstreamPointSources</code> calculates summarized upstream point source emissions. For each sub-basin with at least one upstream
point source (including the sub-basin itself), summed emission volumes and volume weighted emission concentrations are calculated.
HYPE point source types ('ps_type') are returned in separate rows. <code>UpstreamPointSources</code> requires point source types to be one of <code>-1, 0, 1, 2, 3</code>,
corresponding to water abstractions, no differentiation/tracer, and type 1 to 3 (e.g. wastewater treatment plants, industries, and urban stormwater).
For water abstraction point sources, only summed upstream volumes are returned, i.e., concentrations are simply set to zero in results.
</p>


<h3>Value</h3>

<p><code>UpstreamPointSources</code> returns a data frame with columns containing SUBIDs, point source types, volumes, and concentrations found in <code>psd</code>: total nitrogen,
total phosphorus, total suspended sediment, tracer, and temperature.
</p>


<h3>Examples</h3>

<pre><code class="language-R">te1 &lt;- ReadPointSourceData(filename = system.file("demo_model",
"PointSourceData.txt", package = "HYPEtools"))
te2 &lt;- ReadGeoData(filename = system.file("demo_model",
"GeoData.txt", package = "HYPEtools"))
UpstreamPointSources(subid = OutletSubids(te2), gd = te2,
psd = te1, progbar = FALSE)

</code></pre>


</div>
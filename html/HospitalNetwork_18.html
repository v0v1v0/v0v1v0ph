<div class="container">

<table style="width: 100%;"><tr>
<td>hospinet_from_subject_database</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create HospiNet object from subject database</h2>

<h3>Description</h3>

<p>This function creates a HospiNet object from the database containing subjects stays.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hospinet_from_subject_database(
  base,
  window_threshold = 365,
  count_option = "successive",
  condition = "dates",
  prob_params = c(0.0036, 1/365, 0.128),
  noloops = TRUE,
  nmoves_threshold = NULL,
  flag_vars = NULL,
  flag_values = NULL,
  create_MetricsTable = TRUE,
  verbose = FALSE,
  shinySession = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>(hospinet.base) A database of records of stays of subjects in
facilities. This can be obtained using the function <code>checkBase</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window_threshold</code></td>
<td>
<p>(numeric)
A threshold for the number of days between discharge and admission to be counted as a transfer. Set to 0 for same day transfer, default is 365 days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>count_option</code></td>
<td>
<p>(character) TODO. Default is "successive".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>condition</code></td>
<td>
<p>(character) TODO. Default is "dates".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_params</code></td>
<td>
<p>(vector of numeric) Three numerical values to calculate
the probability that a movement causes an introduction from hospital A
to hospital B. See Donker T, Wallinga J, Grundmann H. (2010) &lt;doi:10.1371/journal.pcbi.1000715&gt; for more details.
prob_params[1] is the rate of acquisition in hospital A (related to LOS
in hospital A). Default: 0.0036
prob_params[2] is the rate of loss of colonisation (related to time
between admissions). Default: 1/365
prob_params[4] is the rate of transmission to other patients in hospital
B (related to LOS in hospital B). Default: 0.128</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noloops</code></td>
<td>
<p>(boolean).
Should transfers within the same nodes (loops) be kept or set to 0. Defaults to TRUE, removing loops (setting matrix diagonal to 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmoves_threshold</code></td>
<td>
<p>(numeric)
A threshold for the minimum number of subject transfer between two facilities. Set to NULL to deactivate, default to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flag_vars</code></td>
<td>
<p>(list) Additional variables that can help flag a transfer,
besides the dates of admission and discharge. Must be a named list of two
character vectors which are the names of the columns that can flag a
transfer: the column that can flag a potential origin, and the column
that can flag a potential target. The list must be named with "origin"
and "transfer". Eg: list("origin" = "var1", "target" = "var2"). See
details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flag_values</code></td>
<td>
<p>(list) A named list of two character vectors which contain
the values of the variables in flag_var that are matched to flag a
potential transfer. The list must be named with "origin" and
"transfer". The character vectors might be of length greater than
one. Eg: list("origin" = c("value1", "value2"), "target" = c("value2",
"value2")). The values in 'origin' and 'target' are the values that flag
a potential origin of a transfer, or a potential target,
respectively. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_MetricsTable</code></td>
<td>
<p>(boolean)
Should the metrics table be created along with the network. Setting to FALSE will speed up the results. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE to print computation steps</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shinySession</code></td>
<td>
<p>(NULL) internal variable to deal with the progress bar</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to be sent to checkBase in case the database has not been checked yet.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function will build a HospiNet object from a line-listed
subject database. The HospiNet object has all of the functions stored as
active bindings which can be accessed in the usual way. For more info, see
<code>HospiNet</code>.
Note that the subject database will need to be run through <code>checkBase</code>
before going into this function.
</p>


<h3>Value</h3>

<p>The function returns a HospiNet object.
</p>


<h3>See Also</h3>

<p><code>HospiNet</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">mydb &lt;- create_fake_subjectDB(n_subjects = 100, n_facilities = 10)
myBase &lt;- checkBase(mydb)
hospinet_from_subject_database(myBase)
</code></pre>


</div>
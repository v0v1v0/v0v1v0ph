<div class="container">

<table style="width: 100%;"><tr>
<td>cv_haldensify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>HAL Conditional Density Estimation in a Cross-validation Fold</h2>

<h3>Description</h3>

<p>HAL Conditional Density Estimation in a Cross-validation Fold
</p>


<h3>Usage</h3>

<pre><code class="language-R">cv_haldensify(
  fold,
  long_data,
  wts = rep(1, nrow(long_data)),
  lambda_seq = exp(seq(-1, -13, length = 1000L)),
  smoothness_orders = 0L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fold</code></td>
<td>
<p>Object specifying cross-validation folds as generated by a call
to <code>make_folds</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long_data</code></td>
<td>
<p>A <code>data.table</code> or <code>data.frame</code> object containing
the data in long format, as given in Díaz I, van der Laan MJ (2011).
“Super learner based conditional density estimation with application to marginal structural models.”
<em>International Journal of Biostatistics</em>, <b>7</b>(1), 1–20.,
as produced by <code>format_long_hazards</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wts</code></td>
<td>
<p>A <code>numeric</code> vector of observation-level weights, matching in
its length the number of records present in the long format data. Default
is to weight all observations equally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_seq</code></td>
<td>
<p>A <code>numeric</code> sequence of values of the regularization
parameter of Lasso regression; passed to <code>fit_hal</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothness_orders</code></td>
<td>
<p>A <code>integer</code> indicating the smoothness of the
HAL basis functions; passed to <code>fit_hal</code>. The default
is set to zero, for indicator basis functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional (optional) arguments of <code>fit_hal</code>
that may be used to control fitting of the HAL regression model. Possible
choices include <code>use_min</code>, <code>reduce_basis</code>, <code>return_lasso</code>,
and <code>return_x_basis</code>, but this list is not exhaustive. Consult the
documentation of <code>fit_hal</code> for complete details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Estimates the conditional density of A|W for a subset of the full
set of observations based on the inputted structure of the cross-validation
folds. This is a helper function intended to be used to select the optimal
value of the penalization parameter for the highly adaptive lasso estimates
of the conditional hazard (via <code>cross_validate</code>). The
</p>


<h3>Value</h3>

<p>A <code>list</code>, containing density predictions, observations IDs,
observation-level weights, and cross-validation indices for conditional
density estimation on a single fold of the overall data.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>clarke_wright</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clarke-Wright algorithm, a Capacitated Vehicle Routing Problem solver</h2>

<h3>Description</h3>

<p>Finds a quasi-optimal solution to the Capacitated Vehicle Routing
Problem (CVRP). It is assumed that all demands will be satisfied by a
single source.
</p>


<h3>Usage</h3>

<pre><code class="language-R">clarke_wright(demand, distances, vehicles, restrictions = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>demand</code></td>
<td>
<p>A numeric vector consisting of "demands" indexed by sites.
The <code>i</code>th entry refers to the demand of site <code>i</code> (and the length
of the vector equals the number of sites <code>N</code> with demands). The
units of demand values need to match the units of vehicle capacity values.
<code>NA</code> values are not allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distances</code></td>
<td>
<p>An object of class <code>dist</code>, created by <code>stats::dist()</code>, with
<code>(N + 1)</code> locations describing the distances between individual
sites. The first index refers to the source site. The <code>(i+1)</code>th
index refers to site <code>i</code> (as defined by <code>demand</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vehicles</code></td>
<td>
<p>A <code>data.frame()</code> describing available vehicle types and their respective
capacities. One row per vehicle type. The data frame is expected to have
two columns:
</p>

<ul>
<li> <p><code>n</code> - Number of available vehicles. This can be set to <code>NA</code> if the
number is "infinite" (i.e. effectively the maximal integer value
on your machine.).
It is recommended to keep at least one vehicle type as "infinite",
otherwise the solver might raise a run time error due to initially
not having enough vehicles available (even though the final
solution might satisfy the availability restrictions).
</p>
</li>
<li> <p><code>caps</code> - The vehicle capacity in same units as <code>demand</code>.
</p>
</li>
</ul>
<p>The order of the <code>data.frame()</code> is relevant and determines the prioritization
of vehicle assignments to runs (in case two or more vehicle types are
eligible for assignment the "first" vehicle is chosen). In a typical scenario
"more expensive" vehicles should be further down in the list (so the cheaper
one is chosen in case there is doubt). Since higher capacity vehicles
usually involve higher costs sorting the data frame by capacity is usually
a good rule of thumb.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restrictions</code></td>
<td>
<p>An optional <code>data.frame()</code> that allows to define vehicle type restrictions for
particular sites in the form of a blacklist.
The data frame is expected to have two columns:
</p>

<ul>
<li> <p><code>vehicle</code> - The vehicle type index.
</p>
</li>
<li> <p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector)
</p>
</li>
</ul>
<p>Each row defines a restriction: vehicle type <code>vehicle</code> can not approach site
<code>site</code>. Defaults to <code>NULL</code>, i.e. no restrictions are enforced.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See the original paper,
Clarke, G. and Wright, J.R. (1964) <a href="https://doi.org/10.1287/opre.12.4.568">doi:10.1287/opre.12.4.568</a>,
for a detailed explanation of the Clarke-Wright algorithm.
</p>


<h3>Value</h3>

<p>Returns a "<code>heumilkr_solution</code>" object, a <code>data.frame()</code> with one row per
site-run combination bestowed with additional attributes. Its columns
consist of:
</p>

<ul>
<li> <p><code>site</code> - The site index (i.e. the index of the <code>demand</code> vector) associated
to the run.
</p>
</li>
<li> <p><code>run</code> - Identifies the run the site is assigned to.
</p>
</li>
<li> <p><code>order</code>  - Integer values providing the visiting order within each run.
</p>
</li>
<li> <p><code>vehicle</code> - The vehicle type index (as provided in <code>vehicles</code>) associated
to the run.
</p>
</li>
<li> <p><code>load</code> - The actual load in units of <code>demand</code> on the particular run.
</p>
</li>
<li> <p><code>distance</code> - The travel distance of the particular run.
</p>
</li>
</ul>
<p>Unless a site demand exceeds the vehicle capacities it is always assigned
to only a single run.
</p>


<h3>Examples</h3>

<pre><code class="language-R">demand &lt;- c(3, 2, 4, 2)

positions &lt;-
  data.frame(
    pos_x = c(0, 1, -1, 2, 3),
    pos_y = c(0, 1, 1, 2, 3)
  )

clarke_wright(
  demand,
  dist(positions),
  data.frame(n = NA_integer_, caps = 6)
)

</code></pre>


</div>
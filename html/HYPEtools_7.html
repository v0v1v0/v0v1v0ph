<div class="container">

<table style="width: 100%;"><tr>
<td>BarplotUpstreamClasses</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bar plots of upstream-averaged classes of HYPE sub-basins</h2>

<h3>Description</h3>

<p>Function to plot upstream-averaged landscape property classes of one or several sub-basins as bar plots, e.g.
land use or soils. Builds on <code>barplot</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">BarplotUpstreamClasses(
  x,
  type = c("custom", "landuse", "soil", "crop"),
  desc = NULL,
  class.names = NULL,
  xlab = NULL,
  ylab = "Area fraction (%)",
  ylim = c(-0.05, max(x[, -1] * 150)),
  names.arg = rep("", ncol(x) - 1),
  cex.axis = 1,
  cex.names = 0.9,
  col = NULL,
  border = NA,
  legend.text = NULL,
  legend.pos = "left",
  pars = list(mar = c(1.5, 3, 0.5, 0.5) + 0.1, mgp = c(1.5, 0.3, 0), tcl = NA, xaxs =
    "i")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Data frame, containing column-wise class group fractions with SUBIDs in first column. Typically a result
from <code>UpstreamGroupSLCClasses</code>. Column names of class group fractions <em>must</em> end with <code>_x</code>, with x giving the
class group ID, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character string keyword for class group labeling, used in combination with <code>desc</code>. Type of class groups,
either <code>"landuse"</code>, <code>"soil"</code>, or <code>"crop"</code> (abbreviations allowed). If <code>"custom"</code> (default),  labeling can be fine-
tuned with argument <code>class.names</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desc</code></td>
<td>
<p>List for use with <code>type</code>. Class description labels imported from a 'description.txt' file, for labeling of
standard class groups. See <code>ReadDescription</code> for formatting details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class.names</code></td>
<td>
<p>Character vector of class group names, with same length as number of class group fractions in <code>x</code>.
Specification of bar labels, alternative to arguments <code>type</code> and <code>desc</code>, in particular for cases where a non-standard
grouping was used for <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Character string, x-axis label, with defaults for standard groups land use, soil, and crops.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Character string, y-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>Numeric, two element vector with limits for the y-axis. Defaults to values which give ample space for bar labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names.arg</code></td>
<td>
<p>Character vector, see <code>barplot</code>. Defaults to no labeling below bars (text labels within plot through
arguments above).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>Numeric, character expansion factor for axis annotation and labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.names</code></td>
<td>
<p>Numeric, character expansion factor for class group labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Colors for bars. Defaults to <code>type</code>-specific pre-defined color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>Colors for bar borders. Defaults to no borders.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.text</code></td>
<td>
<p>Character, if provided, a legend will be plotted. Defaults to none if one sub-basin is plotted, and SUBIDs
if several sub-basins are plotted. Set to <code>NA</code> to prevent legend plotting in any case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.pos</code></td>
<td>
<p>Character keyword for legend positioning, most likely <code>"left"</code> or <code>"right"</code>. For details, see
<code>legend</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>
<p>List of tagged values which are passed to <code>par</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>BarplotUpstreamClasses</code> is a wrapper for <code>barplot</code>, with vertical labels plotted over the class group bars.
Most arguments have sensible defaults, but can be adapted for fine-tuning if necessary.
</p>
<p>Column names of <code>x</code> are used to link class groups to class IDs in <code>desc</code>. HYPE has no formal
requirements on how class IDs are numbered and when one of the standard groups land use, soil, or crop are provided in <code>x</code>,
there might be missing class IDs. Class names in <code>desc</code> are matched against column name endings <code>'_x'</code> in <code>x</code>.
If manual names are provided in <code>class.names</code>, the column name endings must be a consecutive sequence from 1 to number of elements
in <code>class.names</code>.
</p>


<h3>Value</h3>

<p>The function returns bar midpoints, see description in <code>barplot</code>.
</p>


<h3>See Also</h3>

<p><code>UpstreamGroupSLCClasses</code>
<code>barplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Import source data
te1 &lt;- ReadGeoData(filename = system.file("demo_model", "GeoData.txt", package = "HYPEtools"))
te2 &lt;- ReadGeoClass(filename = system.file("demo_model", "GeoClass.txt", package = "HYPEtools"))
te3 &lt;- ReadDescription(filename = system.file("demo_model", "description.txt", 
                       package = "HYPEtools"))
# Calculate plot data, upstream soil fractions
te4 &lt;- UpstreamGroupSLCClasses(subid = 63794, gd = te1, gcl = te2, type = "soil")
# Function call
BarplotUpstreamClasses(x = te4, type = "s", desc = te4, ylim = c(0,100))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>IC_clean_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clean the dataframe before to be used with IC_threshold_matrix</h2>

<h3>Description</h3>

<p>This function must be used if missing values are present in the dataset.<br>
It ensures that all correlations and partial correlations can be calculated.
The columns of the dataframe are removed one per one until all can be calculated without error.
It is possible to say that one or more columns must be retained because they are of particular importance in the analysis.
The use and method parameters are used by cor() function. The function uses by default a parallel computing in Unix or MacOSX systems.
If progress is TRUE and the package pbmcapply is present, a progress bar is displayed. If debug is TRUE, some informations are shown during the process.
<code>https://fr.wikipedia.org/wiki/Iconographie_des_corrélations</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">IC_clean_data(
  data = stop("A dataframe object is required"),
  use = c("pairwise.complete.obs", "everything", "all.obs", "complete.obs",
    "na.or.complete"),
  method = c("pearson", "kendall", "spearman"),
  variable.retain = NULL,
  test.partial.correlation = TRUE,
  progress = TRUE,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data.frame to be cleaned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>an optional character string giving a method for computing covariances in the presence of missing values. This must be (an abbreviation of) one of the strings "everything", "all.obs", "complete.obs", "na.or.complete", or "pairwise.complete.obs".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string indicating which correlation coefficient (or covariance) is to be computed. One of "pearson" (default), "kendall", or "spearman": can be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable.retain</code></td>
<td>
<p>a vector with the name of columns to keep</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.partial.correlation</code></td>
<td>
<p>should the partial correlations be tested ?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Show a progress bar</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>if TRUE, information about progression of cleaning are shown</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>IC_clean_data checks and corrects the dataframe to be used with IC_threshold_matrix
</p>


<h3>Value</h3>

<p>A dataframe
</p>


<h3>Author(s)</h3>

<p>Marc Girondot <a href="mailto:marc.girondot@gmail.com">marc.girondot@gmail.com</a>
</p>


<h3>References</h3>

<p>Lesty, M., 1999. Une nouvelle approche dans le choix des régresseurs de la régression multiple en présence d’interactions et de colinéarités. Revue de Modulad 22, 41-77.
</p>


<h3>See Also</h3>

<p>Other Iconography of correlations: 
<code>IC_correlation_simplify()</code>,
<code>IC_threshold_matrix()</code>,
<code>plot.IconoCorel()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library("HelpersMG")
# based on https://fr.wikipedia.org/wiki/Iconographie_des_corrélations
es &lt;- structure(list(Student = c("e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8"), 
                     Mass = c(52, 59, 55, 58, 66, 62, 63, 69), 
                     Age = c(12, 12.5, 13, 14.5, 15.5, 16, 17, 18), 
                     Assiduity = c(12, 9, 15, 5, 11, 15, 12, 9), 
                     Note = c(5, 5, 9, 5, 13.5, 18, 18, 18)), 
                     row.names = c(NA, -8L), class = "data.frame")
es

df_clean &lt;- IC_clean_data(es, debug = TRUE)
cor_matrix &lt;- IC_threshold_matrix(data=df_clean, threshold = NULL, progress=FALSE)
cor_threshold &lt;- IC_threshold_matrix(data=df_clean, threshold = 0.3)
plot(cor_threshold, show.legend.strength=FALSE, show.legend.direction = FALSE)
cor_threshold_Note &lt;- IC_correlation_simplify(matrix=cor_threshold, variable="Note")
plot(cor_threshold_Note, show.legend.strength=FALSE, show.legend.direction = FALSE)

cor_threshold &lt;- IC_threshold_matrix(data=df_clean, threshold = 0.6)
plot(cor_threshold, 
layout=matrix(data=c(53, 53, 55, 55, 
                     55, 53, 55, 53), ncol=2, byrow=FALSE), 
show.legend.direction = FALSE,
show.legend.strength = FALSE, xlim=c(-2, 2), ylim=c(-2, 2))

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>make_design_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build HAL Design Matrix</h2>

<h3>Description</h3>

<p>Make a HAL design matrix based on original design matrix X and a list of
basis functions in argument blist
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_design_matrix(X, blist, p_reserve = 0.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Matrix of covariates containing observed data in the columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blist</code></td>
<td>
<p>List of basis functions with which to build HAL design matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_reserve</code></td>
<td>
<p>Sparse matrix pre-allocation proportion. Default value is 0.5.
If one expects a dense HAL design matrix, it is useful to set p_reserve to a higher value.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>dgCMatrix</code> sparse matrix of indicator basis functions
corresponding to the design matrix in a zero-order highly adaptive lasso.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
gendata &lt;- function(n) {
  W1 &lt;- runif(n, -3, 3)
  W2 &lt;- rnorm(n)
  W3 &lt;- runif(n)
  W4 &lt;- rnorm(n)
  g0 &lt;- plogis(0.5 * (-0.8 * W1 + 0.39 * W2 + 0.08 * W3 - 0.12 * W4))
  A &lt;- rbinom(n, 1, g0)
  Q0 &lt;- plogis(0.15 * (2 * A + 2 * A * W1 + 6 * A * W3 * W4 - 3))
  Y &lt;- rbinom(n, 1, Q0)
  data.frame(A, W1, W2, W3, W4, Y)
}
set.seed(1234)
data &lt;- gendata(100)
covars &lt;- setdiff(names(data), "Y")
X &lt;- as.matrix(data[, covars, drop = FALSE])
basis_list &lt;- enumerate_basis(X)
x_basis &lt;- make_design_matrix(X, basis_list)


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>get_occupancy_intersection_bootstrap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Volume of the intersection of a bootstrapped occupancy object
</h2>

<h3>Description</h3>

<p>The <code>get_occupancy_intersection_bootstrap()</code> function is used to get the volume of the intersection of objects generated with <code>hypervolume_n_occupancy_bootstrap()</code>. It provides raw values or summary statistics for all the hypervolumes or their n_wise combinations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_occupancy_intersection_bootstrap(path,
                                     method = "n_wise",
                                     res_type = "summary",
                                     m = 2, 
                                     relative = FALSE,
                                     tol = 1e-10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>

<p>A path to a directory of bootstrapped occupancy objects obtained with <br><code>hypervolume_n_occupancy_bootstrap()</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>If <code>all</code> compute the volume of the intersection among all the hypervolumes for each bootstrapped occupancy object found in <code>path</code>. If <code>n_wise</code> compute the volume of the intersection for each n_wise combination of hypervolumes within the bootstrapped occupancy objects found in <code>path</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res_type</code></td>
<td>

<p>It can be <code>raw</code> or <code>pairwise</code>. See details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>

<p>Number of elements to choose. Default to 2 (pairwise comparisons). This argument is ignored when <code>method</code> is set to <code>all</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative</code></td>
<td>

<p>If <code>TRUE</code> it computes relative instead of absolute volumes.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>

<p>Set the tolerance for reconstructing whole volume. See details.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>get_occupancy_intersection_bootstrap()</code> returns the volume of the intersection for each bootstrapped occupancy object if <code>res_type = "raw"</code> and <code>method = "all"</code>. When <code>res_type = "summary"</code> and <code>method = "all"</code> this function returns the mean volume as well as the standard deviation, median, minimum, maximum, 2.5% and 97.5% quantiles, skewness and kurtosis of the intersection. The same summary statistics are calculated for each n_wise combination of hypervolumes when <code>res_type = "summary"</code> and <code>method = "n_wise"</code>. The number of elements of n_wise combinations is set with the argument <code>m</code>. The intersection is calculated by finding the set of random points shared by all or n_wise combinations of hypervolumes in each of the bootstrapped occupancy objects. More details on how the intersection is computed in <code>occupancy_to_intersection()</code>. <br>
The <code>get_occupancy_intersection_bootstrap()</code> function attempts to reconstruct the volume of the intersection from each bootstrapped occupancy object. At first, the volume of the union of hypervolumes is calculated for each hypervolume of the jth bootstrapped occupancy object as the ratio between the total number of random points and the number of random points of the ith hypervolume of the jth bootstrapped occupancy object, multiplied by the volume of the ith hypervolume of the jth bootstrapped occupancy object. This step results in a number of reconstructed volumes equal to the number of hypervolumes in the jth bootstrapped occupancy object. Reconstructed volumes are then compared among each other to ensure the consistency of the reconstruction. To do this, the distance among reconstructed volumes is calculated using the <code>dist()</code> function of the <code>stats</code> package. If at least one of the distances is greater than <code>tol</code> the computation is stopped and some suggestions are returned. The volume of the intersection is then calculated as the ratio between the number of random points of the intersection and the total number of random points, multiplied by the volume of the union of hypervolumes. <br>
When <code>relative = TRUE</code> relative instead of absolute volumes are returned. The relative volume is calculated as the ratio between the volume of the intersection and the volume of the union of all the hypervolumes (or combination of hypervolumes when <code>method = "n_wise"</code>). The same approach described above is used to reconstruct the volume of the union of hypervolumes.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with bootstrapped volumes or summary statistics of the intersection.
</p>


<h3>See Also</h3>

<p><code>hypervolume_n_occupancy</code>, <code>hypervolume_n_occupancy_bootstrap</code>, <code>occupancy_to_intersection</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(penguins,package='palmerpenguins')
penguins_no_na = as.data.frame(na.omit(penguins))

# split the dataset on species and sex
penguins_no_na_split = split(penguins_no_na, 
paste(penguins_no_na$species, penguins_no_na$sex, sep = "_"))

# calculate the hypervolume for each element of the splitted dataset
hv_list = mapply(function(x, y) 
  hypervolume_gaussian(x[, c("bill_length_mm","bill_depth_mm","flipper_length_mm")],
                       samples.per.point=100, name = y), 
                       x = penguins_no_na_split, 
                       y = names(penguins_no_na_split))


# transform the list into an HypervolumeList
hv_list = hypervolume_join(hv_list)

# bootstrap the hypervolumes
hv_list_boot = hypervolume_n_resample(name = "example", hv_list)

# calculate occupancy on bootstrapped hypervolumes
hv_occupancy_boot_sex = hypervolume_n_occupancy_bootstrap(path = hv_list_boot,
                                    name = "example_occ",
                                    classification = rep(c("female", "male"), 3))

# get the intersection
get_occupancy_intersection_bootstrap(hv_occupancy_boot_sex)


## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>mapping-functions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>How to set cell properties variably by cell contents</h2>

<h3>Description</h3>

<p>This help page explains how to set properties differently for cells,
depending on their contents.
</p>
<p>For example, in a table of p-values, you could bold cells where p &lt; 0.05:
</p>
<div class="sourceCode"><pre>  map_bold(pval_hux, by_ranges(0.05, c(TRUE, FALSE)))
</pre></div>
<p>Or you can use red text for a particular value:
</p>
<div class="sourceCode"><pre>  hxtbl %&gt;% map_text_color(by_values("Warning" = "red"))
</pre></div>
<p>There is a <code>map_...</code> function for each huxtable cell property. The syntax is:
</p>
<div class="sourceCode"><pre>  map_property(ht, row, col, fn)
</pre></div>
<p>where <code>property</code> is the property name.
</p>
<p><code>row</code> and <code>col</code> specify ranges of rows and columns. See rowspecs for
details. To set properties for the whole table, omit <code>row</code> and <code>col</code>:
</p>
<div class="sourceCode"><pre>  map_property(ht, fn)
</pre></div>
<p>The <code>fn</code> argument is a <em>mapping function</em> which maps cell contents to
property values.
</p>

<ul>
<li>
<p> To set property values in "stripes" by rows or by columns, use <code>by_rows()</code>
and <code>by_cols()</code>.
</p>
</li>
<li>
<p> To set property values for cells with specific contents, use <code>by_values()</code>.
</p>
</li>
<li>
<p> To set property values for cells within a numeric range, use <code>by_ranges()</code>.
</p>
</li>
<li>
<p> To set property values for cells by quantiles, use <code>by_quantiles()</code> or
<code>by_equal_groups()</code>.
</p>
</li>
<li>
<p> To set property values for cells that match a string or regular expression,
use <code>by_regex()</code>.
</p>
</li>
<li>
<p> To map numeric values to a colorspace, use <code>by_colorspace()</code>.
</p>
</li>
<li>
<p> For a more general solution, use <code>by_function()</code> or <code>by_cases()</code>.
</p>
</li>
</ul>
<h3>Caveat</h3>

<p>Most functions convert the huxtable to a matrix using <code>as.matrix()</code>. This can
have unexpected results if you mix character and numeric data. See the
example.
</p>


<h3>Technical details</h3>

<p><code>fn</code> takes four arguments: the entire original huxtable
<code>ht</code>, a numeric vector of <code>rows</code>, a numeric vector of <code>cols</code>, and the
<code>current</code> property values for <code>ht[rows, cols]</code>, as a matrix. It should return
the new property values for <code>ht[rows, cols]</code>, as a matrix.
</p>


<h3>Examples</h3>

<pre><code class="language-R">ht &lt;- hux(Condition = c("OK", "Warning", "Error"))
ht &lt;- map_text_color(ht, by_values(
        OK      = "green",
        Warning = "orange",
        Error   = "red"
      ))
ht

# Leaving NA values alone:
map_text_color(ht, by_values(
      "OK" = "blue", NA, ignore_na = TRUE))

# Resetting values:
map_text_color(ht, by_values(
      "OK" = "blue", NA, ignore_na = FALSE))

ht &lt;- as_hux(matrix(rnorm(15), 5, 3))
map_background_color(ht, by_ranges(
        c(-1, 1),
        c("blue", "yellow", "red")
      ))
map_background_color(ht,
      by_equal_groups(2, c("red", "green")))

ht &lt;- hux(
        Coef = c(3.5, 2.4, 1.3),
        Pval = c(0.04, 0.01, 0.07),
        add_colnames = TRUE
      )
map_bold(ht, everywhere, "Pval",
      by_ranges(0.05, c(TRUE, FALSE)))

# Problems with as.matrix:

ht &lt;- hux(c(-1, 1, 2), letters[1:3])
as.matrix(ht)          # look at the spaces...
as.matrix(ht) &gt; 0      # uh oh
map_text_color(ht,
      by_cases(. &lt; 0 ~ "red", TRUE ~ "blue"))

# To avoid this, only look at the truly numeric columns:
map_text_color(ht, row = 1:3, col = 1,
      by_cases(. &lt; 0 ~ "red", TRUE ~ "blue"))
</code></pre>


</div>
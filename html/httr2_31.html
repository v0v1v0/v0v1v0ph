<div class="container">

<table style="width: 100%;"><tr>
<td>req_oauth_bearer_jwt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>OAuth with a bearer JWT (JSON web token)</h2>

<h3>Description</h3>

<p>Authenticate using a <strong>Bearer JWT</strong> (JSON web token) as an authorization
grant to get an access token, as defined by <a href="https://datatracker.ietf.org/doc/html/rfc7523#section-2.1">Section 2.1 of RFC 7523</a>.
It is often used for service accounts, accounts that are used primarily in
automated environments.
</p>
<p>Learn more about the overall OAuth authentication flow in
<a href="https://httr2.r-lib.org/articles/oauth.html">https://httr2.r-lib.org/articles/oauth.html</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">req_oauth_bearer_jwt(
  req,
  client,
  claim,
  signature = "jwt_encode_sig",
  signature_params = list(),
  scope = NULL,
  token_params = list()
)

oauth_flow_bearer_jwt(
  client,
  claim,
  signature = "jwt_encode_sig",
  signature_params = list(),
  scope = NULL,
  token_params = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>req</code></td>
<td>
<p>A httr2 request object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>client</code></td>
<td>
<p>An <code>oauth_client()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>claim</code></td>
<td>
<p>A list of claims. If all elements of the claim set are static
apart from <code>iat</code>, <code>nbf</code>, <code>exp</code>, or <code>jti</code>, provide a list and
<code>jwt_claim()</code> will automatically fill in the dynamic components.
If other components need to vary, you can instead provide a zero-argument
callback function which should call <code>jwt_claim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signature</code></td>
<td>
<p>Function use to sign <code>claim</code>, e.g. <code>jwt_encode_sig()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signature_params</code></td>
<td>
<p>Additional arguments passed to <code>signature</code>, e.g.
<code>size</code>, <code>header</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scope</code></td>
<td>
<p>Scopes to be requested from the resource owner.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_params</code></td>
<td>
<p>List containing additional parameters passed to the
<code>token_url</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>req_oauth_bearer_jwt()</code> returns a modified HTTP request that will
use OAuth; <code>oauth_flow_bearer_jwt()</code> returns an oauth_token.
</p>


<h3>See Also</h3>

<p>Other OAuth flows: 
<code>req_oauth_auth_code()</code>,
<code>req_oauth_client_credentials()</code>,
<code>req_oauth_password()</code>,
<code>req_oauth_refresh()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">req_auth &lt;- function(req) {
  req_oauth_bearer_jwt(
    req,
    client = oauth_client("example", "https://example.com/get_token"),
    claim = jwt_claim()
  )
}

request("https://example.com") |&gt;
 req_auth()
</code></pre>


</div>
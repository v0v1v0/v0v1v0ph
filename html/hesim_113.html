<div class="container">

<table style="width: 100%;"><tr>
<td>input_mats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Input matrices for a statistical model</h2>

<h3>Description</h3>

<p>An object of class <code>input_mats</code> contains input matrices
for simulating a statistical model. Consists of (i) input matrices, <code>X</code>, and
(ii) metadata used to index each matrix in <code>X</code>.
</p>
<p>Once created, an <code>input_mats</code> object can be converted
to a <code>data.table::data.table</code> with <code>as.data.table()</code>, which is a helpful way to check that
the object is as expected. The <code>print()</code> method summarizes the object and
prints it to the console.
</p>
<p>More details are provided under "Details" below.
</p>


<h3>Usage</h3>

<pre><code class="language-R">input_mats(X, ...)

## S3 method for class 'input_mats'
as.data.table(x, ...)

## S3 method for class 'input_mats'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A list of input matrices for predicting the values of each parameter
in a statistical model. May also be a list of lists of input matrices when a
list of separate models is fit (e.g., with <code>flexsurvreg_list()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>input_mats()</code>, arguments to pass to <code>id_attributes()</code>. For <code>print()</code>,
arguments to pass to <code>data.table::print.data.table()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An <code>input_mats</code> object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>input_mats</code> objects are used with <code>params</code> objects to simulate
disease models, cost models, and/or utility models. Each column of <code style="white-space: pre;">⁠$X⁠</code> contains
variables from the <code>params</code> object and a given row corresponds to a combination
of the ID variables. An input matrix must always have rows for the treatment
strategies (<code>strategy_id</code>) and patients (<code>patient_id</code>); it may optionally
have rows for health variables (<code>state_id</code> or <code>transition_id</code>) and time
intervals (<code>time_id</code>). The rows must be sorted by prioritizing (i) <code>strategy_id</code>,
(ii) <code>patient_id</code>, (iii) the health related ID variable
(either <code>state_id</code> or <code>transition_id</code>) and (iv) <code>time_id</code>.
</p>
<p>While <code>input_mats</code> objects can be created directly with <code>input_mats()</code>, it
is rarely a good idea to do so. They are typically created as the
<code>input_data</code> field when creating model objects (e.g., with
<code>create_IndivCtstmTrans()</code>, <code>create_CohortDtstmTrans()</code>, and
<code>create_PsmCurves()</code>). Internally, these functions
create the input matrices using <code>create_input_mats()</code> methods, which ensure
that they are in the correct format. Users may also use <code>create_input_mats()</code>
methods, but there is not usually a good reason to do so.
</p>
<p><code>as.data.table.input_mats()</code> will convert input matrices into a single
<code>data.table()</code> that column binds the ID variables and the unique combinations
of variables contained in the elements of <code style="white-space: pre;">⁠$X⁠</code>. <code>print.input_mats()</code> prints
a call to <code>as.data.table()</code> and provides additional information about the
ID variables.
</p>


<h3>See Also</h3>

<p>See <code>IndivCtstmTrans()</code> and <code>PsmCurves()</code> for examples in which the
<code>input_data</code> field of an instance of a model class is an <code>input_mats</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("data.table")

# Input matrices are typically created as part of model objects
# Let's illustrate with a partitioned survival model (PSM)

## Model setup
strategies &lt;- data.frame(strategy_id = c(1, 2),
                         new_strategy = c(0, 1))
patients &lt;- data.frame(patient_id = seq(1, 3),
                       age = c(45, 47, 60),
                       female = c(1, 0, 0),
                       group = factor(c("Good", "Medium", "Poor")))
hesim_dat &lt;- hesim_data(strategies = strategies,
                        patients = patients)

## Create survival models for PSM
### Parameters
n &lt;- 2
survmod_params &lt;- params_surv_list(
  # Progression free survival (PFS) 
  pfs = params_surv(
    coefs = list(
      rate = data.frame(intercept = rnorm(n, log(1/5), 1),
                        new_strategy = rnorm(n, log(.8), 1))
      ),
    dist = "exp"
  ),
  
  # Overall survival (OS)
  os = params_surv(
    coefs = list(
      rate = data.frame(intercept = rnorm(n, log(1/10), 1))
    ),
    dist = "exp"
  )
)

### Input data
survmod_input_data &lt;- expand(hesim_dat)[, intercept := 1]

### Model object
survmod &lt;- create_PsmCurves(survmod_params, input_data = survmod_input_data)

## Inspect input data
survmod$input_data # Print "input_mats" object to console
as.data.table(survmod$input_data) # Convert "input_mats" object to data.table
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>computeConditionalCS_DeltaRMM</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RMM}(Mbar)</code>.
</h2>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RMM}(Mbar)</code>. The set <code class="reqn">\Delta^{RMM}(Mbar)</code> adds an additional shape restriction to <code class="reqn">\Delta^{RM}(Mbar)</code> that restricts the underlying trend to be monotone. It may either be increasing (<code class="reqn">\delta_t \ge \delta_{t-1}</code>) or decreasing (<code class="reqn">\delta_t \le \delta_{t-1}</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">computeConditionalCS_DeltaRMM(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1,
                                              size = numPostPeriods),
                                              Mbar = 0,
                         alpha = 0.05, hybrid_flag = "LF", hybrid_kappa = alpha/10,
                         returnLength = FALSE, postPeriodMomentsOnly = TRUE,
                         monotonicityDirection = "increasing",
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{RM}(Mbar)</code> that governs how different the maximal pre-period violation of parallel trends may be from the post-period differential trend. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. "ARP" specifies the conditional confidence set "LF" specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{RM}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals "LF".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = "ARP", set this value to NULL.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{RM}(Mbar)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>monotonicityDirection</code></td>
<td>

<p>Specifies direction of monotonicity restriction. If "increasing", underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If "decreasing", underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals "increasing."
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. "An Honest Approach to Parallel Trends." 2021.
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>agg_table</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregates a data frame to a larger time period</h2>

<h3>Description</h3>

<p>Aggregates a data frame to a larger time period
</p>


<h3>Usage</h3>

<pre><code class="language-R">agg_table(
  x,
  col_name,
  fun,
  period,
  out_name = NULL,
  allow_na = 0,
  start_month = 1,
  end_month = 12
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data frame or tibble with class <code>Date</code> or <code>POSIX*</code>
in the first column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_name</code></td>
<td>
<p>string with column(s) name(s) to aggregate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>string with supported aggregation function name (one per <span class="option">col_name</span>):
<span class="option">mean</span>, <span class="option">min</span>, <span class="option">max</span>, <span class="option">sum</span>, <span class="option">last</span> or <span class="option">first</span>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>string with the aggregation time-step: <span class="option">hourly</span>, <span class="option">daily</span>,
<span class="option">monthly</span>, <span class="option">annually</span> or <span class="option">climatic</span>. <b>NOTE</b>: the <span class="option">climatic</span>
option returns the all series annual statistics (<span class="option">fun</span>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_name</code></td>
<td>
<p>optional. String with the output column(s) name(s). Default values coerce the original
name plus the <span class="option">fun</span> argument (e.g.: <code>tair_max</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of <code>NA_real_</code>
values. By default the function will not tolerate any <code>NA_real_</code> (and will return
<code>NA_real_</code> instead).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_month</code></td>
<td>
<p>optional. Numeric value defining the first month of the annual
period (it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or
<span class="option">climatic</span>). Default sets to 1 (January). <b>NOTE</b>: keep in mind that if you
choose <span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_month</code></td>
<td>
<p>optional. Numeric value defining the last month of the annual period
(it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or
<span class="option">climatic</span>). Default sets to 12 (December). <b>NOTE</b>: keep in mind that if
you choose <span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# set path to file
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
         package = 'hydrotoolbox')

# read and load daily streamflow with default column name
guido_qd &lt;- read_snih(path = path, by = 'day', out_name = 'q(m3/s)')

# aggregate daily to monthly discharge
guido_q_month &lt;- agg_table(x = guido_qd, col_name = 'q(m3/s)',
                          fun = 'mean', period = 'monthly',
                          out_name = 'qm(m3/s)')

# suppose that we are interested on getting the annual maximum
# daily mean discharge for every hydrological year (since this
# station is located at the Mendoza River Basin ~32.9ยบ S, we will
# consider that annual period starts on July)
guido_q_annual &lt;- agg_table(x = guido_qd, col_name = 'q(m3/s)',
                            fun = 'max', period = 'annually',
                            out_name = 'qmax(m3/s)',
                            start_month = 7, end_month = 6)

# now we want the mean, maximum and minimum monthly discharges
guido_q_stats &lt;- agg_table(x = guido_qd, col_name = rep('q(m3/s)', 3),
                           fun = c('mean', 'max', 'min'),
                           period = 'monthly')


</code></pre>


</div>
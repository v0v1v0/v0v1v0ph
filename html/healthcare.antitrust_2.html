<div class="container">

<table style="width: 100%;"><tr>
<td>cell_defn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Allocate Observations to Cells</h2>

<h3>Description</h3>

<p>Take a dataset of hospital discharges, and assigns them to cells that
meet a minimum threshold cell size.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cell_defn(data, min_size, layers, count = "count", expandLayers = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Dataset of discharges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>Minimize cell size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layers</code></td>
<td>
<p>A list of lists. Each layer is a list of the variables
on which observations will be allocated to cells. The layers should
be ordered in decreasing refinement, so that observations not assigned
to a cell meeting the minimum size threshold can be assigned by a
more coarse layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>count</code></td>
<td>
<p>Name of variable which indicates the number of admissions
represented by an observation. Default variable name is <code>count</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expandLayers</code></td>
<td>
<p>logical; if only a single layer is given, setting this to
TRUE will expand the layer to a set of layers where each layer drops the
last variable in the list of the previous layer.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the variable <code>count</code> is not available, the function will assume that
each observation represents one admission, and a variable <code>count</code> will
be created in the output data frame to indicate this.
</p>
<p>When assigning observations to cells in a given layer, this function
only assigns observations that have not been previously assigned in a
finer layer. That is, the function assigns observations without
replacement. Assignment with replacement is currently not supported.
</p>
<p>For more details see the example vignette by typing:
<code>vignette("semipar_example", package = "healthcare.antitrust")</code>
</p>


<h3>Value</h3>

<p>A list of data frames. The first component in the list, <code>assigned</code>,
is the original data frame, with observations assigned to cells, and
excluding observations that were not assigned. The assigned cells are
designated by the variable <code>cell</code>, and the layer number in
which the observation is assigned to the cell is given by the variable
<code>cell_type</code>. The second component of the list, <code>unassigned</code>, is a
data frame with the unassigned observations.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(discharge_data, package = "healthcare.antitrust")

list1 &lt;- c("drg","age","zip5")
layers &lt;- list(list1)
th &lt;- 15
discharge_data$count &lt;- 1

outList &lt;- cell_defn(discharge_data,th,layers)

</code></pre>


</div>
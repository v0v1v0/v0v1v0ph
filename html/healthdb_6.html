<div class="container">

<table style="width: 100%;"><tr>
<td>compute_comorbidity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Elixhauser Comorbidity Index</h2>

<h3>Description</h3>

<p>This function computes unweighted Elixhauser Comorbidity Index for both data.frame and remote table input. The ICD codes used to identify the 31 disease categories is from Quan et al. (2005).
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_comorbidity(
  data,
  vars,
  icd_ver = c("ICD-10", "ICD-9-CM-3digits", "ICD-9-CM-5digits"),
  clnt_id,
  uid = NULL,
  sum_by = c("row", "clnt"),
  excl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data.frames or remote tables (e.g., from <code>dbplyr::tbl_sql()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>An expression passing to <code>dplyr::select()</code>. It can be quoted/unquoted column names, or helper functions, such as <code>dplyr::starts_with()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icd_ver</code></td>
<td>
<p>One of <code>c("ICD-10", "ICD-9-CM-3digits", "ICD-9-CM-5digits")</code>. Specify the ICD code version used in <code>data</code>. The ICD-10 and ICD-9-CM 5 digits version are from Quan et al. (2005). The ICD-9-CM 3 digits version is adopted from Manitoba Centre for Health Policy. It uses BOTH 3-digit and 5-digit codes in search. See their web page for cautions and limitations of the 3 digit version if your data only has 3-digit codes (<a href="http://mchp-appserv.cpe.umanitoba.ca/viewConcept.php?printer=Y&amp;conceptID=1436#CAUTIONS">http://mchp-appserv.cpe.umanitoba.ca/viewConcept.php?printer=Y&amp;conceptID=1436#CAUTIONS</a>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clnt_id</code></td>
<td>
<p>Grouping variable (quoted/unquoted).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uid</code></td>
<td>
<p>Variable name for a unique row identifier. It is necessary for SQL to produce consistent result based on sorting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sum_by</code></td>
<td>
<p>One of "row" or "clnt". The "row" option computes total score for each row (default), and the "clnt" option summarizes total score by <code>clnt_id</code>. Each disease categories will be counted only once in the calculation regardless of multiple records in a category.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>excl</code></td>
<td>
<p>A character vector of disease categories labels that should be excluded in the total score calculation. This is useful when some of the categories are the exposure/outcome of interest, and the goal is to measure comorbidity excluding these disease. See detail for a list of the categories and labels.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>List of disease categories - labels (in quote):
</p>

<ol>
<li>
<p> Congestive Heart Failure - "chf"
</p>
</li>
<li>
<p> Cardiac Arrhythmia - "arrhy"
</p>
</li>
<li>
<p> Valvular Disease - "vd"
</p>
</li>
<li>
<p> Pulmonary Circulation Disorders - "pcd"
</p>
</li>
<li>
<p> Peripheral Vascular Disorders - "pvd"
</p>
</li>
<li>
<p> Hypertension Uncomplicated - "hptn_nc"
</p>
</li>
<li>
<p> Hypertension complicated - "hptn_C"
</p>
</li>
<li>
<p> Paralysis - "para"
</p>
</li>
<li>
<p> Other Neurological Disorders - "Othnd"
</p>
</li>
<li>
<p> Chronic Pulmonary Disease - "copd"
</p>
</li>
<li>
<p> Diabetes Uncomplicated - "diab_nc"
</p>
</li>
<li>
<p> Diabetes Complicated - "diab_c"
</p>
</li>
<li>
<p> Hypothyroidism - "hptothy"
</p>
</li>
<li>
<p> Renal Failure - "rf"
</p>
</li>
<li>
<p> Liver Disease - "ld"
</p>
</li>
<li>
<p> Peptic Ulcer Disease excluding bleeding - "pud_nb"
</p>
</li>
<li>
<p> AIDS/HIV - "hiv"
</p>
</li>
<li>
<p> Lymphoma - "lymp"
</p>
</li>
<li>
<p> Metastatic Cancer - "mets"
</p>
</li>
<li>
<p> Solid Tumor without Metastasis - "tumor"
</p>
</li>
<li>
<p> Rheumatoid Arthritis/collagen - "rheum_a"
</p>
</li>
<li>
<p> Coagulopathy - "coag"
</p>
</li>
<li>
<p> Obesity - "obesity"
</p>
</li>
<li>
<p> Weight Loss - "wl"
</p>
</li>
<li>
<p> Fluid and Electrolyte Disorders - "fluid"
</p>
</li>
<li>
<p> Blood Loss Anemia - "bla"
</p>
</li>
<li>
<p> Deficiency Anemia - "da"
</p>
</li>
<li>
<p> Alcohol Abuse - "alcohol"
</p>
</li>
<li>
<p> Drug Abuse - "drug"
</p>
</li>
<li>
<p> Psychoses - "psycho"
</p>
</li>
<li>
<p> Depression - "dep"
</p>
</li>
</ol>
<h3>Value</h3>

<p>A data.frame or remote table with binary indicators for each categories as columns.
</p>


<h3>References</h3>

<p>Quan H, Sundararajan V, Halfon P, Fong A, Burnand B, Luthi JC, Saunders LD, Beck CA, Feasby TE, Ghali WA. Coding algorithms for defining comorbidities in ICD-9-CM and ICD-10 administrative data. Med Care 2005;43(11):1130-1139.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># make ICD-9 toy data
df &lt;- data.frame(
  uid = 1:10, clnt_id = sample(1:3, 10, replace = TRUE),
  diagx_1 = c("193", "2780", "396", "4254", "4150", "401", "401", "0932", "5329", "2536"),
  diagx_2 = c(NA, NA, "72930", "V6542", "493", "405", "5880", "2409", "714", NA)
)

# compute Elixhauser Comorbidity Index by row
# uid is needed for by row calculation
# 3 categories were excluded in total_eci
compute_comorbidity(df,
  vars = starts_with("diagx"),
  icd_ver = "ICD-9-CM-5digits",
  clnt_id = clnt_id, uid = uid,
  excl = c("drug", "psycho", "dep")
)

# compute ECI by person
compute_comorbidity(df,
  vars = starts_with("diagx"),
  icd_ver = "ICD-9-CM-5digits",
  clnt_id = clnt_id,
  sum_by = "clnt"
)
</code></pre>


</div>
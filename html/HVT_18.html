<div class="container">

<table style="width: 100%;"><tr>
<td>scoreLayeredHVT</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Score which cell and what layer each data point in the test dataset belongs to</h2>

<h3>Description</h3>

<p>This function that scores the cell and corresponding layer for each data point in a test dataset using three 
hierarchical vector quantization (HVT) models (Map A, Map B, Map C) and returns a data frame containing the scored layer output. 
The function incorporates the scored results from each map and merges them to provide a comprehensive result.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scoreLayeredHVT(
  data,
  hvt_mapA,
  hvt_mapB,
  hvt_mapC,
  mad.threshold = 0.2,
  normalize = TRUE,
  seed = 300,
  distance_metric = "L1_Norm",
  error_metric = "max",
  child.level = 1,
  yVar = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data Frame. A data frame containing test dataset. 
The data frame should have all the variable(features) used for training.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hvt_mapA</code></td>
<td>
<p>A list of hvt.results.model obtained from trainHVT function while performing
'trainHVT()' on train data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hvt_mapB</code></td>
<td>
<p>A list of hvt.results.model obtained from trainHVT function while performing 
'trainHVT()' on data with novelty(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hvt_mapC</code></td>
<td>
<p>A list of hvt.results.model obtained from trainHVT function while performing
'trainHVT()' on data without novelty(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mad.threshold</code></td>
<td>
<p>Numeric. A number indicating the permissible Mean Absolute Deviation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normalize</code></td>
<td>
<p>Logical. A logical value indicating if the dataset should be normalized. 
When set to TRUE, the data (testing dataset) is standardized by 'mean' and 'sd' of the training dataset 
referred from the trainHVT(). When set to FALSE, the data is used as such without any changes.
(Default value is TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Numeric. Random Seed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance_metric</code></td>
<td>
<p>Character. The distance metric can be L1_Norm(Manhattan) or L2_Norm(Eucledian). L1_Norm is selected by default.
The distance metric is used to calculate the distance between an n dimensional point and centroid.
The distance metric can be different from the one used during training.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_metric</code></td>
<td>
<p>Character. The error metric can be mean or max. max is selected by default. 
max will return the max of m values and mean will take mean of m values where
each value is a distance between a point and centroid of the cell.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>child.level</code></td>
<td>
<p>Numeric. A number indicating the level for which the heat map is to be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yVar</code></td>
<td>
<p>Character. A character or a vector representing the name of the dependent variable(s)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Dataframe containing scored layer output
</p>


<h3>Author(s)</h3>

<p>Shubhra Prakash &lt;shubhra.prakash@mu-sigma.com&gt;, Sangeet Moy Das &lt;sangeet.das@mu-sigma.com&gt;, Shantanu Vaidya &lt;shantanu.vaidya@mu-sigma.com&gt;,Somya Shambhawi &lt;somya.shambhawi@mu-sigma.com&gt;
</p>


<h3>See Also</h3>

<p><code>trainHVT</code> <br><code>plotHVT</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("EuStockMarkets")
dataset &lt;- data.frame(date = as.numeric(time(EuStockMarkets)),
                     DAX = EuStockMarkets[, "DAX"],
                     SMI = EuStockMarkets[, "SMI"],
                     CAC = EuStockMarkets[, "CAC"],
                     FTSE = EuStockMarkets[, "FTSE"])
rownames(EuStockMarkets) &lt;- dataset$date

train &lt;- EuStockMarkets[1:1302, ]
test &lt;- EuStockMarkets[1303:1860, ]

###MAP-A
hvt_mapA &lt;- trainHVT(train, n_cells = 150, depth = 1, quant.err = 0.1,
                    distance_metric = "L1_Norm", error_metric = "max",
                    normalize = TRUE,quant_method = "kmeans")
                    
identified_Novelty_cells &lt;- c(127,55,83,61,44,35,27,77)
output_list &lt;- removeNovelty(identified_Novelty_cells, hvt_mapA)
data_with_novelty &lt;- output_list[[1]] 
data_with_novelty &lt;- data_with_novelty[, -c(1,2)]

### MAP-B
hvt_mapB &lt;- trainHVT(data_with_novelty,n_cells = 10, depth = 1, quant.err = 0.1,
                    distance_metric = "L1_Norm", error_metric = "max",
                    normalize = TRUE,quant_method = "kmeans")
data_without_novelty &lt;- output_list[[2]]

### MAP-C
hvt_mapC &lt;- trainHVT(data_without_novelty,n_cells = 135,
                    depth = 1, quant.err = 0.1, distance_metric = "L1_Norm",
                    error_metric = "max", quant_method = "kmeans",
                    normalize = TRUE)
                    
##SCORE LAYERED
data_scored &lt;- scoreLayeredHVT(test, hvt_mapA, hvt_mapB, hvt_mapC)
</code></pre>


</div>
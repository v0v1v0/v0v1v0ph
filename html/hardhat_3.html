<div class="container">

<table style="width: 100%;"><tr>
<td>validate_column_names</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ensure that <code>data</code> contains required column names</h2>

<h3>Description</h3>

<p>validate - asserts the following:
</p>

<ul><li>
<p> The column names of <code>data</code> must contain all <code>original_names</code>.
</p>
</li></ul>
<p>check - returns the following:
</p>

<ul>
<li> <p><code>ok</code> A logical. Does the check pass?
</p>
</li>
<li> <p><code>missing_names</code> A character vector. The missing column names.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">validate_column_names(data, original_names)

check_column_names(data, original_names)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame to check.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>original_names</code></td>
<td>
<p>A character vector. The original column names.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A special error is thrown if the missing column is named <code>".outcome"</code>. This
only happens in the case where <code>mold()</code> is called using the xy-method, and
a <em>vector</em> <code>y</code> value is supplied rather than a data frame or matrix. In that
case, <code>y</code> is coerced to a data frame, and the automatic name <code>".outcome"</code> is
added, and this is what is looked for in <code>forge()</code>. If this happens, and the
user tries to request outcomes using <code>forge(..., outcomes = TRUE)</code> but
the supplied <code>new_data</code> does not contain the required <code>".outcome"</code> column,
a special error is thrown telling them what to do. See the examples!
</p>


<h3>Value</h3>

<p><code>validate_column_names()</code> returns <code>data</code> invisibly.
</p>
<p><code>check_column_names()</code> returns a named list of two components,
<code>ok</code>, and <code>missing_names</code>.
</p>


<h3>Validation</h3>

<p>hardhat provides validation functions at two levels.
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠check_*()⁠</code>:  <em>check a condition, and return a list</em>. The list
always contains at least one element, <code>ok</code>, a logical that specifies if the
check passed. Each check also has check specific elements in the returned
list that can be used to construct meaningful error messages.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠validate_*()⁠</code>: <em>check a condition, and error if it does not pass</em>. These
functions call their corresponding check function, and
then provide a default error message. If you, as a developer, want a
different error message, then call the <code style="white-space: pre;">⁠check_*()⁠</code> function yourself,
and provide your own validation function.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other validation functions: 
<code>validate_no_formula_duplication()</code>,
<code>validate_outcomes_are_binary()</code>,
<code>validate_outcomes_are_factors()</code>,
<code>validate_outcomes_are_numeric()</code>,
<code>validate_outcomes_are_univariate()</code>,
<code>validate_prediction_size()</code>,
<code>validate_predictors_are_numeric()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># ---------------------------------------------------------------------------

original_names &lt;- colnames(mtcars)

test &lt;- mtcars
bad_test &lt;- test[, -c(3, 4)]

# All good
check_column_names(test, original_names)

# Missing 2 columns
check_column_names(bad_test, original_names)

# Will error
try(validate_column_names(bad_test, original_names))

# ---------------------------------------------------------------------------
# Special error when `.outcome` is missing

train &lt;- iris[1:100, ]
test &lt;- iris[101:150, ]

train_x &lt;- subset(train, select = -Species)
train_y &lt;- train$Species

# Here, y is a vector
processed &lt;- mold(train_x, train_y)

# So the default column name is `".outcome"`
processed$outcomes

# It doesn't affect forge() normally
forge(test, processed$blueprint)

# But if the outcome is requested, and `".outcome"`
# is not present in `new_data`, an error is thrown
# with very specific instructions
try(forge(test, processed$blueprint, outcomes = TRUE))

# To get this to work, just create an .outcome column in new_data
test$.outcome &lt;- test$Species

forge(test, processed$blueprint, outcomes = TRUE)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>req_oauth_device</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>OAuth with device flow</h2>

<h3>Description</h3>

<p>Authenticate using the OAuth <strong>device flow</strong>, as defined by <a href="https://datatracker.ietf.org/doc/html/rfc8628">RFC 8628</a>.
It's designed for devices that don't have access to a web browser (if you've
ever authenticated an app on your TV, this is probably the flow you've used),
but it also works well from within R.
</p>
<p>Learn more about the overall OAuth authentication flow in
<a href="https://httr2.r-lib.org/articles/oauth.html">https://httr2.r-lib.org/articles/oauth.html</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">req_oauth_device(
  req,
  client,
  auth_url,
  scope = NULL,
  auth_params = list(),
  token_params = list(),
  cache_disk = FALSE,
  cache_key = NULL
)

oauth_flow_device(
  client,
  auth_url,
  pkce = FALSE,
  scope = NULL,
  auth_params = list(),
  token_params = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>req</code></td>
<td>
<p>A httr2 request object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>client</code></td>
<td>
<p>An <code>oauth_client()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auth_url</code></td>
<td>
<p>Authorization url; you'll need to discover this by reading
the documentation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scope</code></td>
<td>
<p>Scopes to be requested from the resource owner.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auth_params</code></td>
<td>
<p>A list containing additional parameters passed to
<code>oauth_flow_auth_code_url()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_params</code></td>
<td>
<p>List containing additional parameters passed to the
<code>token_url</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache_disk</code></td>
<td>
<p>Should the access token be cached on disk? This reduces
the number of times that you need to re-authenticate at the cost of
storing access credentials on disk.
</p>
<p>Learn more in <a href="https://httr2.r-lib.org/articles/oauth.html">https://httr2.r-lib.org/articles/oauth.html</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache_key</code></td>
<td>
<p>If you want to cache multiple tokens per app, use this
key to disambiguate them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkce</code></td>
<td>
<p>Use "Proof Key for Code Exchange"? This adds an extra layer of
security and should always be used if supported by the server.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>req_oauth_device()</code> returns a modified HTTP request that will
use OAuth; <code>oauth_flow_device()</code> returns an oauth_token.
</p>


<h3>Examples</h3>

<pre><code class="language-R">req_auth_github &lt;- function(req) {
  req_oauth_device(
    req,
    client = example_github_client(),
    auth_url = "https://github.com/login/device/code"
  )
}

request("https://api.github.com/user") |&gt;
  req_auth_github()
</code></pre>


</div>
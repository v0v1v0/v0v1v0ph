<div class="container">

<table style="width: 100%;"><tr>
<td>preproc_main</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A wrapper function for preproc_precondition_data, preproc_audit_data, and calc_annual_flow_stats</h2>

<h3>Description</h3>

<p>A wrapper function for <code>preproc_precondition_data</code>,
<code>preproc_audit_data</code>, and <br><code>calc_annual_flow_stats</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">preproc_main(
  data = NULL,
  Date,
  value,
  date_format = "%Y-%m-%d",
  year_group = c("WY", "CY", "year"),
  use_specific_years = FALSE,
  begin_year = NULL,
  end_year = NULL,
  days_cutoff = 360,
  calc_high = TRUE,
  calc_low = TRUE,
  calc_percentiles = TRUE,
  calc_monthly = TRUE,
  calc_WSCVD = TRUE,
  longitude = NA,
  calc_ICVD = FALSE,
  zero_threshold = 33,
  quantile_type = 8,
  na.action = c("na.omit", "na.pass")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>'data.frame'. Optional data.frame input, with columns containing <code>Date</code> and <code>value</code>.
Column names are specified as strings in the corresponding parameter. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Date</code></td>
<td>
<p>'Date' or 'character' vector when <code>data = NULL</code>, or 'character' string identifying
Date column name when <code>data</code> is specified. Dates associated with each value in <code>value</code>
parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>'numeric' vector when <code>data = NULL</code>, or 'character' string identifying year column
name when <code>data</code> is specified. Values to precondition and calculate n-day moving averages
from. N-day moving averages only calculated for daily data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_format</code></td>
<td>
<p>'character' string. Format of Date. Default is <code>"%Y-%m-%d"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year_group</code></td>
<td>
<p>'character' value. Specify either <code>"year"</code> for calendar year, <code>"WY"</code> for water
year, or <code>"CY"</code> for climate year. Used to select data after preconditioning for audit and
annual statistics. Default is <code>"WY"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_specific_years</code></td>
<td>
<p>'boolean' value. Flag to clip data to a certain set of years in
<code>year_group</code>. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>begin_year</code></td>
<td>
<p>'numeric' value. If <code>use_specific_years = TRUE</code>, beginning year to clip
<code>value</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_year</code></td>
<td>
<p>'numeric' value. If <code>use_specific_years = TRUE</code>, ending year to clip <code>value</code>.
Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>days_cutoff</code></td>
<td>
<p>'numeric' value. Designating the number of days required for a year to be
counted as full. Default is <code>360</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_high</code></td>
<td>
<p>'boolean' value. Calculate high streamflow statistics for years in <code>year_group</code>.
Default is <code>TRUE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_low</code></td>
<td>
<p>'boolean' value. Calculate low streamflow statistics for years in <code>year_group</code>.
Default is <code>TRUE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_percentiles</code></td>
<td>
<p>'boolean' value. Calculate percentiles for years in <code>year_group</code>.
Default is <code>TRUE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_monthly</code></td>
<td>
<p>'boolean' value. Calculate monthly statistics for years in <code>year_group</code>.
Default is <code>TRUE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_WSCVD</code></td>
<td>
<p>'boolean' value. Calculate winter-spring center volume date for years in
<code>year_group</code>. Default is <code>TRUE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longitude</code></td>
<td>
<p>'numeric' value. Site longitude in NAD83, required in WSCVD calculation.
Default is <code>NA</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_ICVD</code></td>
<td>
<p>'boolean' value. Calculate inverse center volume date for years in
<code>year_group</code>. Default is <code>FALSE</code>. See <strong>Details</strong> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero_threshold</code></td>
<td>
<p>'numeric' value as percentage. The percentage of years of a statistic that
need to be zero in order for it to be deemed a zero streamflow site for that statistic. For
use in trend calculation. See <strong>Details</strong> on attributes. Default is <code>33</code> (33 percent) of
the annual statistic values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile_type</code></td>
<td>
<p>'numeric' value. The distribution type used in the <code>stats::quantile</code>
function. Default is <code>8</code> (median-unbiased regardless of distribution). Other
types common in hydrology are <code>6</code> (Weibull) or <code>9</code> (unbiased for normal distributions).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>'character' string indicating na.action passed to <code>stats::aggregate</code>
<code>na.action</code> parameter. Default is <code>"na.omit"</code>, which removes <code>NA</code> values before aggregating
statistics, or <code>"na.pass"</code>, which will pass <code>NA</code> values and return <code>NA</code> in the grouped
calculation if any <code>NA</code> values are present.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a wrapper function of <code>preproc_precondition_data</code>, <code>preproc_audit_data</code>, and<br><code>calc_annual_flow_stats</code>. Data are first passed to the precondition function, then audited,
then annual statistics are computed.<br>
It also checks the timestep of the data to make sure that it is daily timestep.
Other time steps are currently not supported and will return the data.frame without moving
averages computed.
</p>


<h3>Value</h3>

<p>A list of three data.frames: 1 of preconditioned data, 1 data audit, and 1 annual
statistics.
</p>


<h3>See Also</h3>

<p><code>preproc_audit_data</code>, <code>preproc_precondition_data</code>,
<code>calc_annual_flow_stats</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">preproc_main(data = example_obs, Date = "Date", value = "streamflow_cfs", longitude = -68)

</code></pre>


</div>
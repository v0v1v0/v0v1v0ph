<div class="container">

<table style="width: 100%;"><tr>
<td>category</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the categories of events.</h2>

<h3>Description</h3>

<p>Calculates the categories of MHWs or MCSs produced by <code>detect_event</code> in
accordance with the naming scheme proposed in Hobday et al. (2018).
</p>


<h3>Usage</h3>

<pre><code class="language-R">category(
  data,
  y = temp,
  S = TRUE,
  name = "Event",
  climatology = FALSE,
  MCScorrect = F,
  season = "range",
  roundVal = 4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The function receives the full (list) output from the
<code>detect_event</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The column containing the measurement variable. If the column
name differs from the default (i.e. <code>temp</code>), specify the name here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>This argument informs the function if the data were collected in the
southern hemisphere (TRUE, default) or the northern hemisphere (FALSE) so that it may correctly
output the <code>season</code> column (see below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>If a character string (e.g. "Bohai Sea") is provided here it will be used
to name the events in the <code>event_name</code> column (see below) of the output.
If no value is provided the default output is "Event".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>climatology</code></td>
<td>
<p>The default setting of <code>FALSE</code> will tell this function to output only
the summary (wide) results for the individual events as seen in Hobday et al. (2018). If set
to <code>TRUE</code>, this function will return a list of two dataframes, same
as <code>detect_event</code>. The first dataframe <code>climatology</code>, contains the same
information as found in <code>detect_event</code>, but with the addition of the daily
intensity (anomaly above seasonal doy threshold) and category values. The second dataframe,
<code>event</code>, is the summary results that this function produces by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MCScorrect</code></td>
<td>
<p>When calculating marine cold-spells (MCSs) it may occur in some areas
that the bottom thresholds for the more intense categories will be below -1.8C,
this is physically impossible on Earth, so if one wants to correct the bottom thresholds
to not be able to exceed -1.8C, set this argument to TRUE (default is FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>season</code></td>
<td>
<p>This argument allows the user to decide how the season(s) of occurrence for
the MHWs are labelled. The default setting of <code>"range"</code> will return the range of seasons
over which the MHW occurred, as seen in Hobday et al. (2018). One may chose to rather have
this function return only the season during the "start", "peak", or "end" of the MHW by giving
the corresponding character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundVal</code></td>
<td>
<p>This argument allows the user to choose how many decimal places
the outputs will be rounded to. Default is 4. To
prevent rounding set <code>roundClm = FALSE</code>. This argument may only be given
numeric values or FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An explanation for the categories is as follows:
</p>

<ol>
<li>
<p>I Moderate-Events that have been detected, but with a maximum intensity that does not
double the distance between the seasonal climatology and the threshold value.
</p>
</li>
<li>
<p>II Strong-Events with a maximum intensity that doubles the distance from the seasonal
climatology and the threshold, but do not triple it.
</p>
</li>
<li>
<p>III Severe-Events that triple the aforementioned distance, but do not quadruple it.
</p>
</li>
<li>
<p>IV Extreme-Events with a maximum intensity that is four times or greater than the
aforementioned distance. Scary stuff...
</p>
</li>
</ol>
<h3>Value</h3>

<p>The function will return a tibble with results similar to those seen in
Table 2 of Hobday et al. (2018). This provides the information necessary to
appraise the extent of the events in the output of <code>detect_event</code> based on the
category ranking scale. The category thresholds are calculated based on the difference
between the given seasonal climatology and threshold climatology. The four category levels
are then the difference multiplied by the category level.
</p>
<p>The definitions for the default output columns are as follows:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>event_no</code></td>
<td>
<p>The number of the event as determined by <code>detect_event</code>
to allow for joining between the outputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_name</code></td>
<td>
<p>The name of the event. Generated from the <code>name</code>
value provided and the year of the <code>peak_date</code> (see following) of
the event. If no <code>name</code> value is provided the default "Event" is used.
As proposed in Hobday et al. (2018), <code>Moderate</code> events are not given a name
so as to prevent multiple repeat names within the same year. If two or more events
ranked greater than Moderate are reported within the same year, they will be
differentiated with the addition of a trailing letter
(e.g. Event 2001a, Event 2001b).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>peak_date</code></td>
<td>
<p>The date (day) on which the maximum intensity of the event
was recorded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>category</code></td>
<td>
<p>The maximum category threshold reached/exceeded by the event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_max</code></td>
<td>
<p>The maximum intensity of the event above the threshold value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duration</code></td>
<td>
<p>The total duration (days) of the event. Note that this includes
any possible days when the measurement value <code>y</code>) may have dropped below the
threshold value. Therefore, the proportion of the event duration (days) spent above
certain thresholds may not add up to 100% (see following four items).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_moderate</code></td>
<td>
<p>The proportion of the total duration (days) spent at or above
the first threshold, but below any further thresholds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_strong</code></td>
<td>
<p>The proportion of the total duration (days) spent at or above
the second threshold, but below any further thresholds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_severe</code></td>
<td>
<p>The proportion of the total duration (days) spent at or above
the third threshold, but below the fourth threshold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_extreme</code></td>
<td>
<p>The proportion of the total duration (days) spent at or above
the fourth and final threshold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>season</code></td>
<td>
<p>The season(s) during which the event occurred. If the event
occurred across two seasons this will be displayed as e.g. "Winter/Spring".
Across three seasons as e.g. "Winter-Summer". Events lasting across four or more
seasons are listed as "Year-round". December (June) is used here as the start of
Austral (Boreal) summer. If "start", "peak", or "end" was given to the <code>season</code>
argument then only the one season during that chosen period will be given.</p>
</td>
</tr>
</table>
<p>If <code>climatology = TRUE</code>, this function will output a list of two dataframes.
The first dataframe, <code>climatology</code>, will contain the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>The column containing the daily date values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_no</code></td>
<td>
<p>The numeric event number label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intensity</code></td>
<td>
<p>The daily exceedance (default is degrees C) above the
seasonal climatology.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>category</code></td>
<td>
<p>The category classification per day.</p>
</td>
</tr>
</table>
<p>The second dataframe, <code>event</code>, contains the default output of this function,
as detailed above.
</p>


<h3>Author(s)</h3>

<p>Robert W. Schlegel
</p>


<h3>References</h3>

<p>Hobday et al. (2018). Categorizing and Naming
Marine Heatwaves. Oceanography 31(2).
</p>


<h3>Examples</h3>

<pre><code class="language-R">res_WA &lt;- detect_event(ts2clm(sst_WA,
                       climatologyPeriod = c("1983-01-01", "2012-12-31")))
# Note that the name argument expects a character vector
cat_WA &lt;- category(res_WA, name = "WA")
tail(cat_WA)

# If the data were collected in the northern hemisphere
# we must let the function know this, as seen below
res_Med &lt;- detect_event(ts2clm(sst_Med,
                        climatologyPeriod = c("1983-01-01", "2012-12-31")))
cat_Med &lt;- category(res_Med, S = FALSE, name = "Med")
tail(cat_Med)

# One may also choose to have this function output the daily
# category classifications as well by setting: climatology = TRUE
cat_WA_daily &lt;- category(res_WA, name = "WA", climatology = TRUE)
head(cat_WA_daily$climatology)

# Note that this will not return the complete time series, only the
# days during which events were detected.
# This was done to reduce the size of the output for those working
# with gridded data.
# Should one want a complete time series, the daily category results
# may simply be left_join() with the detect_event() results
cat_WA_ts &lt;- dplyr::left_join(res_WA$climatology,
                              cat_WA_daily$climatology)
head(cat_WA_ts)

</code></pre>


</div>
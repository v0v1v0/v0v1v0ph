<div class="container">

<table style="width: 100%;"><tr>
<td>hBayesDM_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>hBayesDM Model Base Function</h2>

<h3>Description</h3>

<p>The base function from which all hBayesDM model functions are created.
</p>
<p>Contributor: <a href="https://ccs-lab.github.io/team/jethro-lee/">Jethro Lee</a>
</p>


<h3>Usage</h3>

<pre><code class="language-R">hBayesDM_model(
  task_name,
  model_name,
  model_type = "",
  data_columns,
  parameters,
  regressors = NULL,
  postpreds = "y_pred",
  stanmodel_arg = NULL,
  preprocess_func
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>task_name</code></td>
<td>
<p>Character value for name of task. E.g. <code>"gng"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_name</code></td>
<td>
<p>Character value for name of model. E.g. <code>"m1"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_type</code></td>
<td>
<p>Character value for modeling type: <code>""</code> OR <code>"single"</code> OR
<code>"multipleB"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_columns</code></td>
<td>
<p>Character vector of necessary column names for the data. E.g.
<code>c("subjID", "cue", "keyPressed", "outcome")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>List of parameters, with information about their lower bound, plausible value,
upper bound. E.g. <code>list("xi" = c(0, 0.1, 1), "ep" = c(0, 0.2, 1), "rho" = c(0, exp(2),
Inf))</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regressors</code></td>
<td>
<p>List of regressors, with information about their extracted dimensions. E.g.
<code>list("Qgo" = 2, "Qnogo" = 2, "Wgo" = 2, "Wnogo" = 2)</code>. OR if model-based regressors are
not available for this model, <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>postpreds</code></td>
<td>
<p>Character vector of name(s) for the trial-level posterior predictive
simulations. Default is <code>"y_pred"</code>. OR if posterior predictions are not yet available for
this model, <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stanmodel_arg</code></td>
<td>
<p>Leave as <code>NULL</code> (default) for completed models. Else should either be a
character value (specifying the name of a Stan file) OR a <code>stanmodel</code> object (returned as
a result of running <code>stan_model</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preprocess_func</code></td>
<td>
<p>Function to preprocess the raw data before it gets passed to Stan. Takes
(at least) two arguments: a data.table object <code>raw_data</code> and a list object
<code>general_info</code>. Possible to include additional argument(s) to use during preprocessing.
Should return a list object <code>data_list</code>, which will then directly be passed to Stan.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>task_name</strong>: Typically same task models share the same data column requirements.
</p>
<p><strong>model_name</strong>: Typically different models are distinguished by their different list of
parameters.
</p>
<p><strong>model_type</strong> is one of the following three:
</p>

<dl>
<dt><code>""</code></dt>
<dd>
<p>Modeling of multiple subjects. (Default hierarchical Bayesian analysis.)</p>
</dd>
<dt><code>"single"</code></dt>
<dd>
<p>Modeling of a single subject.</p>
</dd>
<dt><code>"multipleB"</code></dt>
<dd>
<p>Modeling of multiple subjects, where multiple blocks exist within
each subject.</p>
</dd>
</dl>
<p><strong>data_columns</strong> must be the entirety of necessary data columns used at some point in the R
or Stan code. I.e. <code>"subjID"</code> must always be included. In the case of 'multipleB' type
models, <code>"block"</code> should also be included as well.
</p>
<p><strong>parameters</strong> is a list object, whose keys are the parameters of this model. Each parameter
key must be assigned a numeric vector holding 3 elements: the parameter's lower bound,
plausible value, and upper bound.
</p>
<p><strong>regressors</strong> is a list object, whose keys are the model-based regressors of this model.
Each regressor key must be assigned a numeric value indicating the number of dimensions its
data will be extracted as. If model-based regressors are not available for this model, this
argument should just be <code>NULL</code>.
</p>
<p><strong>postpreds</strong> defaults to <code>"y_pred"</code>, but any other character vector holding
appropriate names is possible (c.f. Two-Step Task models). If posterior predictions are not yet
available for this model, this argument should just be <code>NULL</code>.
</p>
<p><strong>stanmodel_arg</strong> can be used by developers, during the developmental stage of creating a
new model function. If this argument is passed a character value, the Stan file with the
corresponding name will be used for model fitting. If this argument is passed a
<code>stanmodel</code> object, that <code>stanmodel</code> object will be used for model fitting. When
creation of the model function is complete, this argument should just be left as <code>NULL</code>.
</p>
<p><strong>preprocess_func</strong> is the part of the code that is specific to the model, and is thus
written in the specific model R file.<br>
Arguments for this function are:
</p>

<dl>
<dt><code>raw_data</code></dt>
<dd>
<p>A data.table that holds the raw user data, which was read by using
<code>fread</code>.</p>
</dd>
<dt><code>general_info</code></dt>
<dd>
<p>A list that holds the general informations about the raw data, i.e.
<code>subjs</code>, <code>n_subj</code>, <code>t_subjs</code>, <code>t_max</code>, <code>b_subjs</code>, <code>b_max</code>.</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Optional additional argument(s) that specific model functions may want to
include. Examples of such additional arguments currently being used in hBayesDM models are:
<code>RTbound</code> (choiceRT_ddm models), <code>payscale</code> (igt models), and <code>trans_prob</code> (ts
models).</p>
</dd>
</dl>
<p>Return value for this function should be:
</p>

<dl>
<dt><code>data_list</code></dt>
<dd>
<p>A list with appropriately named keys (as required by the model Stan
file), holding the fully preprocessed user data.</p>
</dd>
</dl>
<p>NOTE: Syntax for data.table slightly differs from that of data.frame. If you want to use
<code>raw_data</code> as a data.frame when writing the <code>preprocess_func</code>, simply begin with the
line: <code>raw_data &lt;- as.data.frame(raw_data)</code>.<br>
NOTE: Because of allowing case &amp; underscore insensitive column names in user data,
<code>raw_data</code> columns must now be referenced by their lowercase non-underscored versions,
e.g. <code>"subjid"</code>, within the code of the preprocess function.<br></p>


<h3>Value</h3>

<p>A specific hBayesDM model function.
</p>


</div>
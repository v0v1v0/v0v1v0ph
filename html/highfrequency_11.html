<div class="container">

<table style="width: 100%;"><tr>
<td>businessTimeAggregation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Business time aggregation</h2>

<h3>Description</h3>

<p>Time series aggregation based on 'business time' statistics. Instead of equidistant sampling based on time during a trading day, business time sampling creates measures and samples equidistantly using these instead.
For example when sampling based on volume, business time aggregation will result in a time series that has an equal amount of volume between each observation (if possible).
</p>


<h3>Usage</h3>

<pre><code class="language-R">businessTimeAggregation(
  pData,
  measure = "volume",
  obs = 390,
  bandwidth = 0.075,
  tz = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pData</code></td>
<td>
<p><code>xts</code> or <code>data.table</code> containing data to aggregate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>character denoting which measure to use. Valid options are <code>"intensity"</code>, <code>"vol"</code>, and <code>"volume"</code>, 
denoting the trade intensity process of Oomen (2005), volatility, and volume, respectively. Default is <code>"volume"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>integer valued numeric of length 1 denoting how many observations is wanted after the aggregation procedure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bandwidth</code></td>
<td>
<p>numeric of length one, denoting which bandwidth parameter to use in the trade intensity process estimation of Oomen (2005).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>fallback time zone used in case we we are unable to identify the timezone of the data, by default: <code>tz = NULL</code>. We attempt to extract the timezone from the DT column (or index) of the data, which may fail. 
In case of failure we use <code>tz</code> if specified, and if it is not specified, we use <code>"UTC"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments passed on to <code>spotVol</code> when measure is <code>"vol"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing <code>"pData"</code> which is the aggregated data and a list containing the intensity process, split up day by day.
</p>


<h3>Author(s)</h3>

<p>Emil Sjoerup.
</p>


<h3>References</h3>

<p>Dong, Y., and Tse, Y. K. (2017). Business time sampling scheme with applications to testing semi-martingale hypothesis and estimating integrated volatility. <em>Econometrics</em>, 5, 51.
</p>
<p>Oomen, R. C. A. (2006). Properties of realized variance under alternative sampling schemes. <em>Journal of Business &amp; Economic Statistics</em>, 24, 219-237
</p>


<h3>Examples</h3>

<pre><code class="language-R">


pData &lt;- sampleTData[,list(DT, PRICE, SIZE)]
# Aggregate based on the trade intensity measure. Getting 390 observations.
agged &lt;- businessTimeAggregation(pData, measure = "intensity", obs = 390, bandwidth = 0.075)
# Plot the trade intensity measure
plot.ts(agged$intensityProcess$`2018-01-02`)
rCov(agged$pData[, list(DT, PRICE)], makeReturns = TRUE)
rCov(pData[,list(DT, PRICE)], makeReturns = TRUE, alignBy = "minutes", alignPeriod = 1)

# Aggregate based on the volume measure. Getting 78 observations.
agged &lt;- businessTimeAggregation(pData, measure = "volume", obs = 78)
rCov(agged$pData[,list(DT, PRICE)], makeReturns = TRUE)
rCov(pData[,list(DT, PRICE)], makeReturns = TRUE, alignBy = "minutes", alignPeriod = 5)

</code></pre>


</div>
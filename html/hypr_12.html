<div class="container">

<table style="width: 100%;"><tr>
<td>cmat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieve or set contrast matrix</h2>

<h3>Description</h3>

<p>Use these functions to retrieve or set a <code>hypr</code> objectâ€™s contrast matrix. If used for updating, the hypothesis matrix and equations are derived automatically.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmat(x, add_intercept = FALSE, remove_intercept = FALSE, as_fractions = TRUE)

cmat(x, add_intercept = FALSE, remove_intercept = FALSE) &lt;- value

contr.hypothesis(
  ...,
  add_intercept = FALSE,
  remove_intercept = NULL,
  as_fractions = FALSE
)

## S4 replacement method for signature 'factor,ANY,hypr'
contrasts(x, how.many = NULL) &lt;- value

## S4 replacement method for signature 'factor,ANY,hypr_cmat'
contrasts(x, how.many = NULL) &lt;- value

contr.hypothesis(
  x,
  add_intercept = NULL,
  remove_intercept = FALSE,
  as_fractions = FALSE
) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A hypr object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_intercept</code></td>
<td>
<p>Add additional intercept column to contrast matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_intercept</code></td>
<td>
<p>If <code>TRUE</code>, tries to find an intercept column (all codes equal) and removes it from the matrix. If <code>NULL</code>, does the same but does not throw an exception if no intercept is found. <code>FALSE</code> explicitly disables this functionality. A numeric argument explicitly identifies the index of the column to be removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_fractions</code></td>
<td>
<p>Should the returned matrix be formatted as fractions (using <code>MASS::as.fractions()</code>)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>contrast matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>A list of hypothesis equations for which to retrieve a contrast matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>how.many</code></td>
<td>
<p>see <code>stats::contrasts()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Basic specification of contrasts in R is accomplished with basic R functions <code>stats::contrasts()</code> and <code>stats::C()</code> (Chambers &amp; Hastie, 1992). Other relevant packages for this topic are <code>multcomp</code> (Bretz et al., 2010), <code>contrast</code> (Kuhn et al., 2016), and, including also various vignettes, <code>emmeans</code> (Lenth, 2019).
</p>


<h3>Value</h3>

<p>A <code>matrix</code> of contrast codes with contrasts as columns and levels as rows.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>cmat(x, add_intercept = FALSE, remove_intercept = FALSE) &lt;- value</code>: Set contrast matrix
</p>
</li>
<li> <p><code>contr.hypothesis()</code>: Retrieve contrast matrix with sensible intercept default to override factor contrasts
</p>
</li>
<li> <p><code>contrasts(x = factor, how.many = ANY) &lt;- value</code>: Update factor contrasts
</p>
</li>
<li> <p><code>contrasts(x = factor, how.many = ANY) &lt;- value</code>: Update factor contrasts
</p>
</li>
<li> <p><code>contr.hypothesis(
  x,
  add_intercept = NULL,
  remove_intercept = FALSE,
  as_fractions = FALSE
) &lt;- value</code>: Update contrast matrix with sensible intercept default
</p>
</li>
</ul>
<h3>References</h3>

<p>Chambers, J. M. and Hastie, T. J. (1992) <em>Statistical models</em>. Chapter 2 of <em>Statistical Models</em> in S eds J. M. Chambers and T. J. Hastie, Wadsworth &amp; Brooks/Cole.
</p>
<p>Frank Bretz, Torsten Hothorn and Peter Westfall (2010), <em>Multiple Comparisons Using R</em>, CRC Press, Boca Raton.
</p>
<p>Max Kuhn, contributions from Steve Weston, Jed Wing, James Forester and Thorn Thaler (2016). <em>contrast: A Collection of Contrast Methods</em>. R package version 0.21. <a href="https://CRAN.R-project.org/package=contrast">https://CRAN.R-project.org/package=contrast</a>
</p>
<p>Lenth, R. (2019). <em>emmeans: Estimated Marginal Means, aka Least-Squares Means</em>. R package version 1.4.1. <a href="https://CRAN.R-project.org/package=emmeans">https://CRAN.R-project.org/package=emmeans</a>
</p>


<h3>See Also</h3>

<p><code>hypr</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
h &lt;- hypr(mu1~0, mu2~mu1)
cmat(h) # retrieve the contrast matrix

contr.hypothesis(h) # by default without intercept (removes first column)
contr.hypothesis(mu1~0, mu2~mu1)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>kmplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Kaplan-Meier plot with number at risk table for internal calibration and
external calibration results</h2>

<h3>Description</h3>

<p>Kaplan-Meier plot with number at risk table for internal calibration and
external calibration results
</p>


<h3>Usage</h3>

<pre><code class="language-R">kmplot(
  object,
  group.name = NULL,
  time.at = NULL,
  col.pal = c("JCO", "Lancet", "NPG", "AAAS")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object returned by <code>calibrate</code> or
<code>calibrate_external</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group.name</code></td>
<td>
<p>Risk group labels. Default is
Group 1, Group 2, ..., Group k.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.at</code></td>
<td>
<p>Time points to evaluate the number at risk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.pal</code></td>
<td>
<p>Color palette to use. Possible values are
<code>"JCO"</code>, <code>"Lancet"</code>, <code>"NPG"</code>, and <code>"AAAS"</code>.
Default is <code>"JCO"</code>.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">data("smart")
# Use the first 1000 samples as training data
# (the data used for internal validation)
x &lt;- as.matrix(smart[, -c(1, 2)])[1:1000, ]
time &lt;- smart$TEVENT[1:1000]
event &lt;- smart$EVENT[1:1000]

# Take the next 1000 samples as external calibration data
# In practice, usually use data collected in other studies
x_new &lt;- as.matrix(smart[, -c(1, 2)])[1001:2000, ]
time_new &lt;- smart$TEVENT[1001:2000]
event_new &lt;- smart$EVENT[1001:2000]

# Fit Cox model with lasso penalty
fit &lt;- fit_lasso(x, survival::Surv(time, event), nfolds = 5, rule = "lambda.1se", seed = 11)

# Internal calibration
cal.int &lt;- calibrate(
  x, time, event,
  model.type = "lasso",
  alpha = 1, lambda = fit$lambda,
  method = "cv", nfolds = 5,
  pred.at = 365 * 9, ngroup = 3
)

kmplot(
  cal.int,
  group.name = c("High risk", "Medium risk", "Low risk"),
  time.at = 1:6 * 365
)

# External calibration
cal.ext &lt;- calibrate_external(
  fit, x, time, event,
  x_new, time_new, event_new,
  pred.at = 365 * 5, ngroup = 3
)

kmplot(
  cal.ext,
  group.name = c("High risk", "Medium risk", "Low risk"),
  time.at = 1:6 * 365
)
</code></pre>


</div>
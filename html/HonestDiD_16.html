<div class="container">

<table style="width: 100%;"><tr>
<td>createSensitivityResults</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code> for vector of possible M values.
</h2>

<h3>Description</h3>

<p>Constructs robust confidence intervals for a choice <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code> for vector of possible M values. By default, the function constructs robust confidence intervals for <code class="reqn">\Delta^{SD}(M)</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createSensitivityResults(betahat, sigma,
                         numPrePeriods, numPostPeriods,
                         method = NULL,
                         Mvec = NULL,
                         l_vec = .basisVector(index = 1, size = numPostPeriods),
                         monotonicityDirection = NULL,
                         biasDirection = NULL,
                         alpha = 0.05,
                         parallel = FALSE,
                         seed = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>String that specifies the choice of method for constructing robust confidence intervals. This must be one of "FLCI", "Conditional", "C-F" (conditional FLCI hybrid), or "C-LF" (conditional least-favorable hybrid). Default equals NULL and the function automatically sets method based on the recommendations in Rambachan &amp; Roth (2021) depending on the choice of Delta. If Delta = DeltaSD, default selects the FLCI. If Delta = DeltaSDB or DeltaSDM, default delects the conditional FLCI hybrid.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mvec</code></td>
<td>

<p>Vector of M values for which the user wishes to construct robust confidence intervals. If NULL, the function constructs a grid of length 10 that starts at M = 0 and ends at M equal to the upper bound constructed from the pre-periods using the function DeltaSD_upperBound_Mpre if number of pre-periods &gt; 1 or the standard deviation of the first pre-period coefficient if number of pre-periods = 1. Default equals null.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biasDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional bias restriction to <code class="reqn">\Delta^{SD}(M)</code>. If "positive", bias is restricted to be positive, <code class="reqn">\delta \ge 0</code>. If "negative", bias is restricted to be negative, <code class="reqn">\delta \le 0</code>. Default equals NULL.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>monotonicityDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional monotonicity restriction to <code class="reqn">\Delta^{SD}(M)</code>. If "increasing", underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If "decreasing", underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals NULL
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>Desired size of the robust confidence sets. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>

<p>Logical to indicate whether the user would like to construct the robust confidence intervals in parallel. This uses the Foreach package and doParallel package. Default equals FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a dataframe with columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>lb</code></td>
<td>

<p>Lower bound of robust confidence sets.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ub</code></td>
<td>

<p>Upper bound of robust confidence sets.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>Method for constructing robust confidence sets
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Delta</code></td>
<td>

<p>The set Delta that was specified.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>

<p>Values of M associated with each robust confidence set.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. "An Honest Approach to Parallel Trends." 2021.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  # Simple use case; for more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  createSensitivityResults(betahat        = BCdata_EventStudy$betahat,
                           sigma          = BCdata_EventStudy$sigma,
                           numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                           numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                           alpha          = 0.05)

</code></pre>


</div>
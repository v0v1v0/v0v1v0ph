<div class="container">

<table style="width: 100%;"><tr>
<td>validate_prediction_size</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ensure that predictions have the correct number of rows</h2>

<h3>Description</h3>

<p>validate - asserts the following:
</p>

<ul><li>
<p> The size of <code>pred</code> must be the same as the size of <code>new_data</code>.
</p>
</li></ul>
<p>check - returns the following:
</p>

<ul>
<li> <p><code>ok</code> A logical. Does the check pass?
</p>
</li>
<li> <p><code>size_new_data</code> A single numeric. The size of <code>new_data</code>.
</p>
</li>
<li> <p><code>size_pred</code> A single numeric. The size of <code>pred</code>.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">validate_prediction_size(pred, new_data)

check_prediction_size(pred, new_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>A tibble. The predictions to return from any prediction
<code>type</code>. This is often created using one of the spruce functions, like
<code>spruce_numeric()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_data</code></td>
<td>
<p>A data frame of new predictors and possibly outcomes.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This validation function is one that is more developer focused rather than
user focused. It is a final check to be used right before a value is
returned from your specific <code>predict()</code> method, and is mainly a "good
practice" sanity check to ensure that your prediction blueprint always returns
the same number of rows as <code>new_data</code>, which is one of the modeling
conventions this package tries to promote.
</p>


<h3>Value</h3>

<p><code>validate_prediction_size()</code> returns <code>pred</code> invisibly.
</p>
<p><code>check_prediction_size()</code> returns a named list of three components,
<code>ok</code>, <code>size_new_data</code>, and <code>size_pred</code>.
</p>


<h3>Validation</h3>

<p>hardhat provides validation functions at two levels.
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠check_*()⁠</code>:  <em>check a condition, and return a list</em>. The list
always contains at least one element, <code>ok</code>, a logical that specifies if the
check passed. Each check also has check specific elements in the returned
list that can be used to construct meaningful error messages.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠validate_*()⁠</code>: <em>check a condition, and error if it does not pass</em>. These
functions call their corresponding check function, and
then provide a default error message. If you, as a developer, want a
different error message, then call the <code style="white-space: pre;">⁠check_*()⁠</code> function yourself,
and provide your own validation function.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other validation functions: 
<code>validate_column_names()</code>,
<code>validate_no_formula_duplication()</code>,
<code>validate_outcomes_are_binary()</code>,
<code>validate_outcomes_are_factors()</code>,
<code>validate_outcomes_are_numeric()</code>,
<code>validate_outcomes_are_univariate()</code>,
<code>validate_predictors_are_numeric()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Say new_data has 5 rows
new_data &lt;- mtcars[1:5, ]

# And somehow you generate predictions
# for those 5 rows
pred_vec &lt;- 1:5

# Then you use `spruce_numeric()` to clean
# up these numeric predictions
pred &lt;- spruce_numeric(pred_vec)

pred

# Use this check to ensure that
# the number of rows or pred match new_data
check_prediction_size(pred, new_data)

# An informative error message is thrown
# if the rows are different
try(validate_prediction_size(spruce_numeric(1:4), new_data))
</code></pre>


</div>
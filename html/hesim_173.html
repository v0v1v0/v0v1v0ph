<div class="container">

<table style="width: 100%;"><tr>
<td>StateVals</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Model for state values</h2>

<h3>Description</h3>

<p>Simulate values (i.e., utility or costs) associated with health states in a
state transition or partitioned survival model.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Parameters for simulating state values. Currently supports
objects of class <code>tparams_mean</code> or <code>params_lm</code>.</p>
</dd>
<dt><code>input_data</code></dt>
<dd>
<p>An object of class input_mats. Only used for
<code>params_lm</code> objects.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>The method used to simulate costs and
quality-adjusted life-years (QALYs) as a function of state values.
If <code>wlos</code>, then costs and QALYs are
simulated by weighting state values by the length of stay in a health
state. If <code>starting</code>, then state values represent a one-time value
that occurs when a patient enters a health state. When <code>starting</code> is
used in a cohort model, the state values only accrue at time 0;
in contrast, in an individual-level model, state values
accrue each time a patient enters a new state and are discounted based on
time of entrance into that state.</p>
</dd>
<dt><code>time_reset</code></dt>
<dd>
<p>If <code>FALSE</code> then time intervals are based on time since
the start of the simulation. If <code>TRUE</code>, then time intervals reset each
time a patient enters a new health state. This is relevant if, for example,
costs vary over time within health states. Only used if <code>method = wlos</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-StateVals-new"><code>StateVals$new()</code></a>
</p>
</li>
<li> <p><a href="#method-StateVals-sim"><code>StateVals$sim()</code></a>
</p>
</li>
<li> <p><a href="#method-StateVals-check"><code>StateVals$check()</code></a>
</p>
</li>
<li> <p><a href="#method-StateVals-clone"><code>StateVals$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-StateVals-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a new <code>StateVals</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>StateVals$new(
  params,
  input_data = NULL,
  method = c("wlos", "starting"),
  time_reset = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>The <code>params</code> field.</p>
</dd>
<dt><code>input_data</code></dt>
<dd>
<p>The <code>input_data</code> field.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>The <code>method</code> field.</p>
</dd>
<dt><code>time_reset</code></dt>
<dd>
<p>The <code>time_reset</code> field.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A new <code>StateVals</code> object.
</p>


<hr>
<a id="method-StateVals-sim"></a>



<h4>Method <code>sim()</code>
</h4>

<p>Simulate state values with either predicted means or random samples by
treatment strategy, patient, health state, and time <code>t</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>StateVals$sim(t, type = c("predict", "random"))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>t</code></dt>
<dd>
<p>A numeric vector of times.</p>
</dd>
<dt><code>type</code></dt>
<dd>
<p><code>"predict"</code> for mean values or <code>"random"</code> for random samples.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A <code>data.table</code> of simulated state values with columns for <code>sample</code>,
<code>strategy_id</code>, <code>patient_id</code>, <code>state_id</code>, <code>time</code>, and <code>value</code>.
</p>


<hr>
<a id="method-StateVals-check"></a>



<h4>Method <code>check()</code>
</h4>

<p>Input validation for class. Checks that fields are the correct type.
</p>


<h5>Usage</h5>

<div class="r"><pre>StateVals$check()</pre></div>


<hr>
<a id="method-StateVals-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>StateVals$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># Simple sick-sicker example where drug costs vary by treatment strategy
# and over time. Prior to time = 5, costs are $10,000 for treatment strategy 
# 1 and $5,000 for treatment strategy 2. After time = 5, costs are $2,000
# for both treatment strategies

## Setup the model
hesim_dat &lt;- hesim_data(
  strategies = data.frame(strategy_id = c(1, 2)),
  patients = data.frame(patient_id = 1:3),
  states = data.frame(state_id = c(1, 2), # Non-death states
                      state_name = c("sick", "sicker")) 
)

## Drug costs vary by health state and time interval
drugcost_tbl &lt;- stateval_tbl(
  data.frame(
    strategy_id = c(1, 1, 2, 2),
    time_start = c(0, 5, 0, 5),
    est = c(10000, 2000, 5000, 2000)
  ),
  dist = "fixed"
)
drugcost_tbl

## Create drug cost model
drugcostmod &lt;- create_StateVals(drugcost_tbl, n = 1, hesim_data = hesim_dat)
      
## Explore predictions from the drug cost model
drugcostmod$sim(t = c(2, 6), type = "predict")
 
</code></pre>


</div>
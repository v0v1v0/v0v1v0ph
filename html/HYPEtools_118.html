<div class="container">

<table style="width: 100%;"><tr>
<td>ReadTimeOutput</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read a Time Output File</h2>

<h3>Description</h3>

<p>Import a time output file 'time&lt;<em>HYPE_output_variable</em>&gt;.txt' or a converted time output file in netCDF format
into R.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ReadTimeOutput(
  filename,
  dt.format = "%Y-%m-%d",
  hype.var = NULL,
  out.reg = NULL,
  type = c("df", "dt", "hsv"),
  select = NULL,
  id = NULL,
  nrows = -1L,
  skip = 0L,
  warn.nan = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>Path to and file name of the time output file to import. Acceptable file choices are <code>*.txt</code> files following
<a href="http://hype.smhi.net//wiki/doku.php?id=start:hype_file_reference:timexxxx.txt">HYPE time output file format</a> or <code>.nc</code>
files following the <a href="http://hype.smhi.net//wiki/doku.php?id=start:hype_netcdf_standard">HYPE netCDF formatting standard</a>.
See also details for netCDF import.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt.format</code></td>
<td>
<p>Date-time <code>format</code> string as in <code>strptime</code>. Incomplete format strings for monthly
and annual values allowed, e.g. <code>"\%Y"</code>. If set to <code>NULL</code>, no date-time conversion will be attempted and the column will
be imported as <code>character</code>, applicable e.g. for files containing just one row of summary values over the model period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hype.var</code></td>
<td>
<p>Character, HYPE variable ID in <code>x</code>. See
<a href="http://hype.smhi.net//wiki/doku.php?id=start:hype_file_reference:info.txt:variables">list of HYPE variables</a>.
If <code>NULL</code> (default), the variable ID is extracted from the provided file name, which only works for standard HYPE
time output file names (incl. regional and class outputs).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.reg</code></td>
<td>
<p>Logical, specify if file contents are sub-basin or output region results (i.e. SUBIDs or OUTREGIDs as columns).
<code>TRUE</code> for output regions, <code>FALSE</code> for sub-basins. <em>Use only in combination with user-provided <code>hype.var</code>
argument.</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character, keyword for data type to return. <code>"df"</code> to return a standard data frame, <code>"dt"</code> to
return a <code>data.table</code> object, or <code>"hsv"</code> to return a <code>HypeSingleVar</code> array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>Integer vector, column numbers to import. Note: first column with dates must be imported and will be added if missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Integer vector, HYPE SUBIDs/OUTREGIDs to import. Alternative to argument <code>select</code>, takes precedence if both are provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrows</code></td>
<td>
<p>Integer, number of rows to import, see documentation in <code>fread</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>Integer, number of <em>data</em> rows to skip on import. Time output header lines are always skipped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn.nan</code></td>
<td>
<p>Logical, check if imported results contain any <code>NaN</code> values. If <code>TRUE</code> and <code>NaN</code>s are found,
a warning is thrown and affected IDs saved in an attribute <code>id.nan</code>. Adds noticeable overhead to import time for large files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical, print information during import.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ReadTimeOutput</code> imports from text or netCDF files. <em>netCDF import is experimental and not feature-complete (e.g. attributes are
not yet fully digested).</em>
Text file import uses <code>fread</code> from package
data.table::data.table, netCDF import extracts data and attributes using functions from package <code>ncdf4</code>.
Date-time representations in data files are converted to POSIX time representations. Monthly and annual time steps are returned as
first day of the time step period.
</p>
<p>Import from netCDF files requires an <code>id</code> dimension in the netCDF data. Gridded data with remapped HYPE results in spatial x/y
dimensions as defined in the <a href="http://hype.smhi.net//wiki/doku.php?id=start:hype_netcdf_standard">HYPE netCDF formatting standard</a>
are currently not supported.
</p>


<h3>Value</h3>

<p><code>ReadTimeOutput</code> returns a <code>data.frame</code>, data.table::data.table, or a <code>HypeSingleVar</code> array.
Data frames and data tables contain additional <code>attributes</code>: <code>variable</code>, giving the HYPE variable ID,
<code>subid</code> and <code>outregid</code>, the HYPE SUBIDs/OUTREGIDs (corresponding to columns from column two onward) to which the time
series belong (both attributes always created and assigned <code>NA</code> if not applicable to data contents), <code>timestep</code> with a
time step attribute, and <code>comment</code> with first row comment of imported text file as character string or global attributes of imported
netCDF file as character string of collated key-value pairs. An additional attribute <code>id.nan</code> might be returned, see argument
<code>warn.nan</code>.
</p>


<h3>Note</h3>

<p>For the conversion of date/time strings, time zone "UTC" is assumed. This is done to avoid potential daylight saving time
side effects when working with the imported data (and possibly converting to string representations during the process).
</p>
<p>HYPE results are printed to files using a user-specified accuracy. This accuracy is specified in 'info.txt' as a number of
decimals to print. If large numbers are printed, this can result in a total number of digits which is too large to print.
Results will then contain values of '****************'. <code>ReadTimeOutput</code> will convert those cases to 'NA' entries.
Current versions of HYPE allow for defining significant instead of fixed number of digits, which should prevent this
issue from arising.
</p>


<h3>Examples</h3>

<pre><code class="language-R">te &lt;- ReadTimeOutput(filename = system.file("demo_model",
"results", "timeCOUT.txt", package = "HYPEtools"), dt.format = "%Y-%m")
te

</code></pre>


</div>
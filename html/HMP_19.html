<div class="container">

<table style="width: 100%;"><tr>
<td>Gen.Alg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find Taxa Separating Two Groups using Genetic Algorithm (GA)</h2>

<h3>Description</h3>

<p>GA-Mantel is a fully multivariate method that uses a genetic algorithm to search over 
possible taxa subsets using the Mantel correlation as the scoring measure for assessing 
the quality of any given taxa subset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">	Gen.Alg(data, covars, iters = 50, popSize = 200, earlyStop = 0, 
	dataDist = "euclidean", covarDist = "gower", verbose = FALSE, 
	plot = TRUE, minSolLen = NULL, maxSolLen = NULL, custCovDist = NULL,
	penalty = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A  matrix of taxonomic counts(columns) for each sample(rows).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covars</code></td>
<td>
<p>A  matrix of covariates(columns) for each sample(rows).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters</code></td>
<td>
<p>The number of times to run through the GA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popSize</code></td>
<td>
<p>The number of solutions to test on each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>earlyStop</code></td>
<td>

<p>The number of consecutive iterations without finding a better solution before stopping 
regardless of the number of iterations remaining. A value of '0' will prevent early 
stopping.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataDist</code></td>
<td>
<p>The distance metric to use for the data. Either "euclidean" or "gower".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covarDist</code></td>
<td>
<p>The distance metric to use for the covariates. Either "euclidean" or "gower".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>While 'TRUE' the current status of the GA will be printed periodically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>A boolean to plot the progress of the scoring statistics by iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minSolLen</code></td>
<td>
<p>The minimum number of columns to select.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxSolLen</code></td>
<td>
<p>The maximum number of columns to select.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custCovDist</code></td>
<td>
<p>A custom covariate distance matrix to use in place of calculating one from covars.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>A number between 0 and 1 used to penalize the solutions based on the number of selected 
taxa using the following formula: score - penalty * ((number of selected taxa)/(number of taxa)).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use a GA approach to find taxa that separate subjects based on group membership or set of covariates.
</p>
<p>The data and covariates should be normalized BEFORE use with this function because of distance
functions.
</p>
<p>This function uses modified code from the rbga function in the genalg package. rbga
</p>
<p>Because the GA looks at combinations and uses the raw data, taxa with a small difference 
in their PIs may be selected and large differences may not be.
</p>
<p>The distance calculations use the vegdist package. vegdist
</p>


<h3>Value</h3>

<p>A list containing
</p>
<table>
<tr style="vertical-align: top;">
<td><code>scoreSumm</code></td>
<td>

<p>A matrix summarizing the score of the population.  This can be used to figure out if the ga has 
come to a final solution or not. This data is also plotted if plot is 'TRUE'.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solutions</code></td>
<td>
<p>The final set of solutions, sorted with the highest scoring first.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scores</code></td>
<td>
<p>The scores for the final set of solutions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>How long in seconds the ga took to run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selected</code></td>
<td>
<p>The selected columns by name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nonSelected</code></td>
<td>
<p>The columns that were NOT selected by name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectedIndex</code></td>
<td>
<p>The selected taxa by column number.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">	## Not run: 
		data(saliva)
		data(throat)
		
		### Combine the data into a single data frame
		group.data &lt;- list(saliva, throat)
		group.data &lt;- formatDataSets(group.data)
		data &lt;- do.call("rbind", group.data)
		
		### Normalize the data by subject
		dataNorm &lt;- t(apply(data, 1, function(x){x/sum(x)}))
		
		### Set covars to just be group membership
		memb &lt;- c(rep(0, nrow(saliva)), rep(1, nrow(throat)))
		covars &lt;- matrix(memb, length(memb), 1)
		
		### We use low numbers for speed. The exact numbers to use depend
		### on the data being used, but generally the higher iters and popSize 
		### the longer it will take to run.  earlyStop is then used to stop the
		### run early if the results aren't improving.
		iters &lt;- 500
		popSize &lt;- 200
		earlyStop &lt;- 250
		
		gaRes &lt;- Gen.Alg(dataNorm, covars, iters, popSize, earlyStop)
	
## End(Not run)
</code></pre>


</div>
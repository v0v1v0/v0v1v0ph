<div class="container">

<table style="width: 100%;"><tr>
<td>calendarHeatmap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calendar heatmap
</h2>

<h3>Description</h3>

<p>Function to plot a heatmap of a daily zoo object with a calendar shape
</p>


<h3>Usage</h3>

<pre><code class="language-R">calendarHeatmap(x, ...)

## S3 method for class 'zoo'
calendarHeatmap(x, from, to, date.fmt="%Y-%m-%d",
                main="Calendar Heat Map",
                col=colorRampPalette(c("red", "orange", "yellow", "white", 
                    "lightblue2", "deepskyblue", "blue3"),  space = "Lab")(8),  
                cuts, cuts.dec=0, cuts.labels, 
                cuts.style=c("fisher", "equal", "pretty", "fixed", "sd", 
                             "quantile", "kmeans", "bclust", "mzb"), 
                legend.title="", legend.fontsize=15,              
                do.png=FALSE, png.fname="mypng.png", png.width=1500, 
                png.height=900, png.pointsize=12, png.res=90,
                do.pdf=FALSE, pdf.fname="mypdf.pdf", pdf.width=11,
                pdf.height=8.5, pdf.pointsize=12, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>daily zoo object to be plotted. Its maximum amount of daily data should be less than 6 years or otherwise it will not be plotted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>

<p>Character indicating the starting date for subsetting <code>x</code>. It has to be in the format indicated by <code>date.fmt</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>

<p>Character indicating the ending date for subsetting <code>x</code>. It has to be in the format indicated by <code>date.fmt</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date.fmt</code></td>
<td>

<p>character indicating the format in which the dates are stored in <code>from</code> and <code>to</code>, e.g. <kbd>%Y-%m-%d</kbd>. See ‘Details’ section in <code>strptime</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>

<p>character, Main chart title.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>

<p>A color palette, i.e. a vector of n contiguous colors generated by functions like rainbow, heat.colors, topo.colors, bpy.colors or one of your own making, perhaps using <code>colorRampPalette</code>. If none is provided, a color ramp with 8 colours is created using <code>colorRampPalette</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cuts</code></td>
<td>

<p>Numeric, indicating the values used to divide the range of <code>x</code> in the legend of colours. If not provided, it is automatically selected as a function of <code>lenght(col)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cuts.dec</code></td>
<td>

<p>Number of decimal places used to present the numbers in the legend of colours.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cuts.labels</code></td>
<td>

<p>Character indicating the label to be used in the colour legend for each one of the values defined by <code>cuts</code>. If not provided, <code>as.character(cuts)</code> is used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cuts.style</code></td>
<td>

<p>discarded because takes too much time or not alway provide the required number of classes: "dpih", "headtails", "hclust",  "jenks".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.title</code></td>
<td>

<p>text to be displayed above the legend of colours.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.fontsize</code></td>
<td>

<p>size of text (in points) used in the legend of colours.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.png</code></td>
<td>

<p>Do you want to write the figure as a .png file? logical, set TRUE to save the image.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png.fname</code></td>
<td>

<p>character, indicating the name of the file (possibly with a meaninful file extension) that will be used to write the output file.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png.width</code></td>
<td>

<p>numeric, the width of the device.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png.height</code></td>
<td>

<p>numeric, the height of the device.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png.pointsize</code></td>
<td>

<p>integer, the default pointsize of plotted text, interpreted as big points (1/72 inch) at <code>res</code> ppi.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png.res</code></td>
<td>

<p>integer, the nominal resolution in ppi which will be recorded in the bitmap file, if a positive integer. Also used for units other than the default, and to convert points to pixels.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.pdf</code></td>
<td>

<p>Do you want to write the figure as a .pdf file? logical, set TRUE to save the image.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf.fname</code></td>
<td>

<p>character, indicating the name of the file (possibly with a significant extension) that will be used to write the output file.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf.width</code></td>
<td>

<p>numeric, the width of the device.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf.height</code></td>
<td>

<p>numeric, the height of the device.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf.pointsize</code></td>
<td>

<p>integer, the default point size to be used. Strictly speaking, in bp, that is 1/72 of an inch, but approximately in points. Defaults to 12.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further arguments passed to functions or from other methods. Not used yet.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The original function <code>calendarHeat</code> was developed by Paul Bleicher, as an R version of a graphic from http://stat-computing.org/dataexpo/2009/posters/wicklin-allison.pdf (not available any longer).
The original function was made available online in 2009, but then it was removed. Now it is available at <a href="https://github.com/tavisrudd/r_users_group_1/blob/master/calendarHeat.R">https://github.com/tavisrudd/r_users_group_1/blob/master/calendarHeat.R</a>.
The original function has "Copyright 2009 Humedica", but it was distributed under the GPL-2 licence, as well as this new version of the function.
</p>
<p>This slighly modified verison of the function is also distributed under the GPL-2 licence, and teh main changes with respect to the original function are: <br></p>
<p>1) uses a zoo object instead of a numeric and character vector, for values and dates, respectively. <br>
2) it allows a customisation of the mian title of the output figure. <br>
3) it allows a customisation of the color palette. <br>
4) it uses a categorical legend instead of a continuos one. <br>
5) it is named <code>calendarHeatmap</code> instead of <code>calendarHeat</code>.
</p>


<h3>Value</h3>

<p>The output of this function is a lattice figure with the calendar heatmap




</p>


<h3>Note</h3>

<p>The maximum amount of years to be plotted is six (6).
</p>


<h3>Author(s)</h3>

<p>Mauricio Zambrano-Bigiarini, <a href="mailto:mzb.devel@gmail.com">mzb.devel@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>colorRampPalette</code>, <code>levelplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">###########
# EXAMPLE 1: basic plotting of a calendar heatmap
###########

# Loading daily streamflow data for Karamet at Gorges.
data(KarameaAtGorgeQts)

x &lt;- KarameaAtGorgeQts
x &lt;- subdaily2daily(x, FUN=mean)

# Temporal subsetting for a amaximum of 6 years
x &lt;- window(x, start="1980-01-01", end="1985-12-31")

# Calendar Heatmap, 8 colours and cuts defined using Fisher method 
calendarHeatmap(x)

</code></pre>


</div>
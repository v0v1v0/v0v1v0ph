<div class="container">

<table style="width: 100%;"><tr>
<td>halfcircle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualization method for flow data using halfcircle diagram</h2>

<h3>Description</h3>

<p>halfcircle function draws flows between nodes creating halfcircle diagram.
</p>


<h3>Usage</h3>

<pre><code class="language-R">halfcircle(flow, node, dir = "horizontal", circle.col = "lightgray",
  circle.trans = 0.5, flow.col = "black", flow.trans = 0.5,
  flow.width = "proportional", node.color = "black", node.size = 0.1,
  node.pch = 20, node.trans = 0.7, label = node[, c(1)],
  label.size = 0.5, label.col = "black", label.gap = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>flow</code></td>
<td>
<p>a dataframe which is to draw half-circles. The data should be in the form of an edge list containing node of origin, node of destination, and magnitude of the flow on the first three columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node</code></td>
<td>
<p>a dataframe which contains names of node on the first column. Nodes on the center line of a circle are drawn by the order of the data. Every node presented in flow data must be contained.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>if 'horizontal' (the default), nodes are drawn along the X-axis. If 'vertical', nodes are drawn along the Y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle.col</code></td>
<td>
<p>color of background circle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle.trans</code></td>
<td>
<p>transparency of color of background circle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flow.col</code></td>
<td>
<p>flow color. flow.col can be a list of color vectors, the vectors are then used per flow.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flow.trans</code></td>
<td>
<p>transparency of color of flows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flow.width</code></td>
<td>
<p>width of flows. if 'proportional' (the default), each width is calculated to be proportional to the maximum volume of flows. Maximum width is set to be 10. Otherwise, a list of width vectors can be used per flow.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.color</code></td>
<td>
<p>node color. It can be a list of color vectors, and the vectors are then used per node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.size</code></td>
<td>
<p>node size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.pch</code></td>
<td>
<p>node type. see ?points for more options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.trans</code></td>
<td>
<p>transparency of color of flows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>the first column of node, names, is represented (the default). a list of vector an be used per node. if NULL, no label is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.size</code></td>
<td>
<p>label size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.col</code></td>
<td>
<p>label color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.gap</code></td>
<td>
<p>gap between the node and the respective label</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a low-level graphical function, and you will create a halfcircle diagram. To create the diagram, nodes are placed as a set of points on a straight line segment in the center of a circle. The flow between two nodes is represented using a half cicle drawn from the origin to the destination in a clockwise direction. It is virtually drawn on xy-coordinates where both x and y range from -1 to 1. Flows between the same nodes are not drawn.
</p>


<h3>Author(s)</h3>

<p>Sohyun Park &lt;park.2627@osu.edu&gt;, Ningchuan Xiao
</p>


<h3>References</h3>

<p>Xiao and Chun (2009) &lt;doi:10.1559/152304009788188763&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load flow data
data(ex_flow)
flow &lt;- ex_flow[,c(1,2,3)] # select veget column as volume
flow &lt;- subset(flow,flow$vegetable&gt;5000)
data(ex_node) # load node data
node &lt;- ex_node[c(order(-ex_node$gdpc)),] # sort nodes in descending order of gdpc values
halfcircle(flow, node, dir="vertical", circle.col="gray", flow.col="black",label=NULL)

# legend
max &lt;- max(flow[,c(3)]); median &lt;- median(flow[,c(3)]); min &lt;- min(flow[,c(3)])
max_w &lt;- 10; median_w &lt;- round(10*median/max); min_w &lt;- round(10*min/max)
legend(x=-1.2, y=-0.8, legend=c(paste(round(max)), paste(round(median)), paste(round(min))),
    lty=1, lwd=c(max_w, median_w, min_w), cex=0.7)

# customize colors
node$color &lt;- c("#22abcb","#4eb6ad","#86c388","#adcd6c","#dad84f")[node$income_level]
flow2 &lt;- data.frame(flow, node[match(flow[,"O"], node[,"country"]),])
halfcircle(flow2, node, dir="vertical", flow.col=flow2$color, node.color=node$color, label=NULL)

# highlight one node
flow3 &lt;- flow
flow3$color &lt;- "gray"
flow3$color[flow3$O=="China"|flow3$D=="China"] &lt;- "blue"
flow3 &lt;- flow3[c(order(flow3$color,decreasing=TRUE)),]
node$label &lt;- ""
node$label[node$country=="China"] &lt;- "China"
halfcircle(flow3, node, dir="vertical", flow.col=flow3$color, label=node$label, label.size=0.7)
</code></pre>


</div>
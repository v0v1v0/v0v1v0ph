<div class="container">

<table style="width: 100%;"><tr>
<td>b_selection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross validation bandwidth selection</h2>

<h3>Description</h3>

<p>Implements the bandwidth selection for the future conditional hazard rate <code class="reqn">\hat h_x(t)</code> based on K-fold cross validation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">b_selection(data, marker_name, event_time_name = 'years',
            time_name = 'year', event_name = 'status2', I, b_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame of time dependent data points.  Missing values are allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker_name</code></td>
<td>
<p>The column name of the marker values in the data frame <code>data</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_time_name</code></td>
<td>
<p>The column name of the event times in the data frame <code>data</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_name</code></td>
<td>
<p>The column name of the times the marker values were observed in the data frame <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_name</code></td>
<td>
<p>The column name of the events in the data frame <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>I</code></td>
<td>
<p>Number of observations leave out for a K cross validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b_list</code></td>
<td>
<p>Vector of bandwidths that need to be tested.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>b_selection</code> implements the cross validation bandwidth selection for the future conditional hazard rate <code class="reqn">\hat h_x(t)</code> given by
</p>
<p style="text-align: center;"><code class="reqn"> b_{CV} = arg min_b \sum_{i = 1}^N \int_0^T \int_s^T Z_i(t)Z_i(s)(\hat{h}_{X_i(s)}(t-s)- h_{X_i(s)}(t-s))^2 dt ds,</code>
</p>

<p>where <code class="reqn">\hat h_x(t)</code> is a smoothed kernel density estimator of <code class="reqn"> h_x(t)</code> and <code class="reqn">Z_i</code> the exposure process of individual <code class="reqn">i</code>. Note that <code class="reqn">\hat h_x(t)</code> is dependent on <code class="reqn">b</code>.
</p>


<h3>Value</h3>

<p>A list with the tested bandwidths and its cross validation scores.
</p>


<h3>See Also</h3>

 <p><code>b_selection_prep_g, Q1, R_K, prep_cv, dataset_split</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">
I = 26
b_list = seq(0.9, 1.3, 0.1)

b_scores_alb = b_selection(pbc2, 'albumin', 'years', 'year', 'status2', I, b_list)
b_scores_alb[[2]][which.min(b_scores_alb[[1]])]
</code></pre>


</div>
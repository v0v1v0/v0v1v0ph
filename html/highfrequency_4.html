<div class="container">

<table style="width: 100%;"><tr>
<td>aggregateTrades</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate a <code>data.table</code> or <code>xts</code> object containing trades dataÂ´</h2>

<h3>Description</h3>

<p>Aggregate tick-by-tick trade data and return a time series as a <code>data.table</code> or <code>xts</code> object where first observation is always the opening price
and subsequent observations are the closing prices over the interval. This function accepts arbitrary number of symbols over an arbitrary number of days.
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggregateTrades(
  tData,
  alignBy = "minutes",
  alignPeriod = 5,
  marketOpen = "09:30:00",
  marketClose = "16:00:00",
  tz = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tData</code></td>
<td>
<p><code>data.table</code> or <code>xts</code> object to be aggregated, containing the intraday price series of a stock for possibly multiple days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alignBy</code></td>
<td>
<p>character, indicating the time scale in which <code>alignPeriod</code> is expressed. Possible values are: <code>"secs"</code>, <code>"seconds"</code>, <code>"mins"</code>, <code>"minutes"</code>, <code>"hours"</code>.
To aggregate based on a 5 minute frequency, set <code>alignPeriod = 5</code> and <code>alignBy = "minutes"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alignPeriod</code></td>
<td>
<p>positive numeric, indicating the number of periods to aggregate over. For example, to aggregate
based on a 5 minute frequency, set <code>alignPeriod = 5</code> and <code>alignBy = "minutes"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marketOpen</code></td>
<td>
<p>the market opening time, by default: <code>marketOpen = "09:30:00"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marketClose</code></td>
<td>
<p>the market closing time, by default: <code>marketClose = "16:00:00"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>fallback time zone used in case we we are unable to identify the timezone of the data, by default: <code>tz = NULL</code>. We attempt to extract the timezone from the DT column (or index) of the data, which may fail. 
In case of failure we use <code>tz</code> if specified, and if it is not specified, we use <code>"UTC"</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The time stamps of the new time series are the closing times and/or days of the intervals. 
</p>
<p>The output <code>"PRICE"</code> column is constructed using previous tick aggregation.
</p>
<p>The variable <code>"SIZE"</code> is aggregated by taking the sum over each interval.
</p>
<p>The variable <code>"VWPRICE"</code> is the aggregated price weighted by volume.
</p>
<p>The time stamps of the new time series are the closing times of the intervals. 
</p>
<p>In case of previous tick aggregation or <code>alignBy = "seconds"/"minutes"/"hours"</code>,
the element of the returned series with e.g. time stamp 09:35:00 contains 
the last observation up to that point, including the value at 09:35:00 itself.
</p>


<h3>Value</h3>

<p>A <code>data.table</code> or <code>xts</code> object containing the aggregated time series.
</p>


<h3>Author(s)</h3>

<p>Jonathan Cornelissen, Kris Boudt, Onno Kleen, and Emil Sjoerup.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Aggregate trade data to 5 minute frequency
tDataAggregated &lt;- aggregateTrades(sampleTData, alignBy = "minutes", alignPeriod = 5)
tDataAggregated
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>without_internet</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make all HTTP requests raise an error</h2>

<h3>Description</h3>

<p><code>without_internet</code> simulates the situation when any network request will
fail, as in when you are without an internet connection. Any HTTP request
through the verb functions in <code>httr</code> will raise an error.
</p>


<h3>Usage</h3>

<pre><code class="language-R">without_internet(expr)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>Code to run inside the mock context</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The error message raised has a well-defined shape, made of three
elements, separated by space: (1) the request
method (e.g. "GET"); (2) the request URL; and
(3) the request body, if present. The verb-expectation functions,
such as <code>expect_GET()</code> and <code>expect_POST()</code>, look for this shape.
</p>


<h3>Value</h3>

<p>The result of <code>expr</code>
</p>


<h3>See Also</h3>

<p><code>block_requests()</code> to enable mocking on its own (not in a context)
</p>


<h3>Examples</h3>

<pre><code class="language-R">without_internet({
  expect_error(
    httr::GET("http://httpbin.org/get"),
    "GET http://httpbin.org/get"
  )
  expect_error(httr::PUT("http://httpbin.org/put",
    body = '{"a":1}'
  ),
  'PUT http://httpbin.org/put {"a":1}',
  fixed = TRUE
  )
})
</code></pre>


</div>